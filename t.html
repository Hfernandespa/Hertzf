<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Harmonizador Fernandes v1.5 - Frequências Terapêuticas & Protocolos Personalizados">
    <title>Harmonizador Fernandes - Versão com Banco de Dados Completo</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Chart.js para visualizações -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Estilos customizados -->
    <style>
        /* [Manter todos os estilos do código anterior] */
        :root {
            --primary-color: #3b82f6;
            --secondary-color: #8b5cf6;
            --accent-color: #f59e0b;
            --success-color: #10b981;
            --warning-color: #fbbf24;
            --danger-color: #ef4444;
            --dark-bg: #1e293b;
            --darker-bg: #0f172a;
            --card-bg: #1f2937;
            --text-primary: #ffffff;
            --text-secondary: #9ca3af;
        }

        /* Animações */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        /* Estilos do canvas */
        #waveCanvas {
            background: linear-gradient(to bottom, var(--dark-bg), var(--darker-bg));
        }

        /* Cards de frequência */
        .frequency-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .frequency-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            background-color: rgba(59, 130, 246, 0.1);
        }

        .frequency-card.selected {
            background-color: rgba(59, 130, 246, 0.2);
            border: 2px solid var(--primary-color);
        }

        /* Badge de categoria */
        .category-badge {
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
        }

        /* Badge de evidência científica */
        .evidence-badge {
            font-size: 0.7rem;
            padding: 0.2rem 0.6rem;
            border-radius: 4px;
            font-weight: bold;
            margin-left: 0.5rem;
        }

        .evidence-high {
            background-color: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }

        .evidence-medium {
            background-color: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }

        .evidence-low {
            background-color: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        /* Destaque de busca */
        .search-highlight {
            background-color: rgba(59, 130, 246, 0.3);
            padding: 0 2px;
            border-radius: 2px;
        }

        /* Passos de protocolo */
        .protocol-step {
            position: relative;
            padding-left: 2rem;
        }

        .protocol-step::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0.5rem;
            width: 1rem;
            height: 1rem;
            border-radius: 50%;
        }

        .protocol-step.energy::before { background: var(--accent-color); }
        .protocol-step.focus::before { background: var(--primary-color); }
        .protocol-step.anti-inflammatory::before { background: var(--success-color); }
        .protocol-step.harmony::before { background: var(--secondary-color); }

        /* Título estilizado */
        .harmonizador-title {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Container do banco de dados */
        .database-container {
            height: 600px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) var(--card-bg);
        }

        .database-container::-webkit-scrollbar {
            width: 8px;
        }

        .database-container::-webkit-scrollbar-track {
            background: var(--card-bg);
        }

        .database-container::-webkit-scrollbar-thumb {
            background-color: var(--primary-color);
            border-radius: 4px;
        }

        /* Container do Top 10 */
        .top10-container {
            max-height: 500px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) var(--card-bg);
        }

        .top10-container::-webkit-scrollbar {
            width: 8px;
        }

        .top10-container::-webkit-scrollbar-track {
            background: var(--card-bg);
        }

        .top10-container::-webkit-scrollbar-thumb {
            background-color: var(--primary-color);
            border-radius: 4px;
        }

        /* Estilos do timer */
        .timer-display {
            font-family: 'Courier New', Courier, monospace;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .timer-progress {
            transition: width 1s linear;
        }

        /* Botão voltar ao topo */
        #topBtn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        #topBtn.show {
            opacity: 1;
            visibility: visible;
        }

        #topBtn:hover {
            transform: translateY(-3px);
        }

        /* Destaque de protocolo */
        .protocol-highlight {
            animation: pulse 2s infinite;
        }

        /* Eficiência alta */
        .efficiency-high {
            color: var(--warning-color);
        }

        /* Itens de referência */
        .reference-item {
            position: relative;
            padding-left: 2rem;
        }

        .reference-item::before {
            content: '•';
            position: absolute;
            left: 0;
            top: 0;
        }

        /* Eficiência da onda */
        .wave-efficiency {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Input do timer */
        .timer-input {
            width: 3rem;
            text-align: center;
        }

        /* Melhorias de acessibilidade */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Melhorias de foco para acessibilidade */
        button:focus,
        input:focus,
        select:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

        /* Melhorias para modo de alto contraste */
        @media (prefers-contrast: high) {
            .frequency-card:hover,
            .frequency-card.selected {
                border-width: 3px;
            }
        }

        /* Melhorias para redução de movimento */
        @media (prefers-reduced-motion: reduce) {
            .frequency-card,
            #topBtn,
            .timer-progress,
            .protocol-highlight {
                transition: none;
                animation: none;
            }
        }

        /* Container de referências com rolagem */
        .references-container {
            max-height: 400px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) var(--card-bg);
        }

        .references-container::-webkit-scrollbar {
            width: 8px;
        }

        .references-container::-webkit-scrollbar-track {
            background: var(--card-bg);
        }

        .references-container::-webkit-scrollbar-thumb {
            background-color: var(--primary-color);
            border-radius: 4px;
        }

        /* Layout do Visualizador de Onda ao lado da Frequência */
        .frequency-input-group {
            display: flex;
            gap: 1rem;
            align-items: flex-end;
        }

        .frequency-controls {
            flex: 1;
        }

        .wave-visualizer-small {
            width: 120px;
            height: 80px;
            flex-shrink: 0;
        }

        /* Responsividade para telas pequenas */
        @media (max-width: 768px) {
            .frequency-input-group {
                flex-direction: column;
                align-items: stretch;
            }

            .wave-visualizer-small {
                width: 100%;
                height: 100px;
                margin-top: 1rem;
            }
        }
        
        /* Destaque para áreas editáveis */
        .editable-area {
            border: 2px dashed var(--warning-color);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            position: relative;
        }
        
        .editable-label {
            position: absolute;
            top: -12px;
            left: 15px;
            background: var(--dark-bg);
            padding: 0 8px;
            font-size: 12px;
            color: var(--warning-color);
            font-weight: bold;
        }
        
        /* Modal de informações sobre headphones */
        .headphone-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            animation: slideIn 0.5s ease;
        }
        
        .headphone-content {
            background: linear-gradient(135deg, #1e293b, #334155);
            border-radius: 16px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            border: 2px solid var(--primary-color);
            position: relative;
        }
        
        .headphone-icon {
            font-size: 4rem;
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 1rem;
        }
        
        .headphone-title {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }
        
        .headphone-text {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }
        
        .headphone-benefits {
            background: rgba(59, 130, 246, 0.1);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .headphone-benefits h4 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        .headphone-benefits ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .headphone-benefits li {
            padding: 0.25rem 0;
            padding-left: 1.5rem;
            position: relative;
        }
        
        .headphone-benefits li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: var(--success-color);
            font-weight: bold;
        }
        
        .headphone-close {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            display: block;
            margin: 0 auto;
            transition: background 0.3s ease;
        }
        
        .headphone-close:hover {
            background: var(--secondary-color);
        }
        
        .dont-show-again {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 1rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        
        .dont-show-again input {
            margin-right: 0.5rem;
        }
        
        /* Cards de benefícios */
        .benefit-card {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--primary-color);
        }
        
        .benefit-card h4 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .benefit-card p {
            color: var(--text-secondary);
            font-size: 0.875rem;
            line-height: 1.5;
        }
        
        /* Seção Hero no topo */
        .hero-section {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.9), rgba(15, 23, 42, 0.9)), 
                        url('https://images.unsplash.com/photo-1648080473344-a399955ac123?q=80&w=1974&auto=format&fit=crop') center/cover;
            border-radius: 16px;
            padding: 3rem 2rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 70% 30%, rgba(59, 130, 246, 0.2) 0%, transparent 50%);
            z-index: 0;
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .hero-title {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .hero-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            max-width: 700px;
            margin-bottom: 2rem;
        }
        
        .hero-features {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .hero-feature {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            width: 180px;
            animation: float 3s ease-in-out infinite;
        }
        
        .hero-feature:nth-child(2) {
            animation-delay: 0.5s;
        }
        
        .hero-feature:nth-child(3) {
            animation-delay: 1s;
        }
        
        .hero-feature:nth-child(4) {
            animation-delay: 1.5s;
        }
        
        .hero-feature-icon {
            font-size: 2.5rem;
            margin-bottom: 0.75rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .hero-feature-title {
            font-weight: bold;
            margin-bottom: 0.25rem;
            color: var(--text-primary);
        }
        
        .hero-feature-text {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        
        .hero-cta {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
        }
        
        .hero-cta:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.6);
        }
        
        /* Responsividade para a seção hero */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2rem;
            }
            
            .hero-subtitle {
                font-size: 1rem;
            }
            
            .hero-features {
                gap: 1.5rem;
            }
            
            .hero-feature {
                width: 150px;
            }
            
            .hero-feature-icon {
                font-size: 2rem;
            }
        }
        
        /* Cabeçalho com imagem de fundo */
        .header-with-bg {
            background: linear-gradient(to right, rgba(15, 23, 42, 0.85), rgba(30, 41, 59, 0.85)), 
                        url('https://images.unsplash.com/photo-1518709268805-4e9042af2176?q=80&w=2070&auto=format&fit=crop') center/cover;
            position: relative;
            overflow: hidden;
        }
        
        .header-with-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 50%, rgba(59, 130, 246, 0.15) 0%, transparent 70%);
            z-index: 0;
        }
        
        .header-content {
            position: relative;
            z-index: 1;
        }
        
        /* Efeito de brilho no título */
        .title-glow {
            text-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
        }

        /* Filtros avançados */
        .filter-section {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .filter-group {
            margin-bottom: 1rem;
        }

        .filter-label {
            display: block;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .range-slider-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .range-slider {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: rgba(59, 130, 246, 0.2);
            outline: none;
            -webkit-appearance: none;
        }

        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
        }

        .range-value {
            min-width: 80px;
            text-align: center;
            font-weight: 500;
            color: var(--primary-color);
        }

        /* Paginação */
        .pagination-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .pagination-btn {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: var(--text-primary);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .pagination-btn:hover:not(:disabled) {
            background: rgba(59, 130, 246, 0.3);
        }

        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination-info {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* Modal de detalhes */
        .detail-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            overflow-y: auto;
            padding: 2rem;
        }

        .detail-content {
            background: linear-gradient(135deg, #1e293b, #334155);
            border-radius: 16px;
            padding: 2rem;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            border: 2px solid var(--primary-color);
            position: relative;
        }

        .detail-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--danger-color);
            color: white;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.3s ease;
        }

        .detail-close:hover {
            background: #dc2626;
        }

        .detail-header {
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(59, 130, 246, 0.2);
        }

        .detail-title {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .detail-subtitle {
            font-size: 1.2rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .detail-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid rgba(59, 130, 246, 0.2);
        }

        .detail-tab {
            padding: 0.75rem 1.5rem;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .detail-tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .detail-tab:hover {
            color: var(--text-primary);
        }

        .detail-tab-content {
            display: none;
        }

        .detail-tab-content.active {
            display: block;
        }

        .detail-section {
            margin-bottom: 1.5rem;
        }

        .detail-section-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .evidence-item {
            background: rgba(59, 130, 246, 0.05);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 3px solid var(--primary-color);
        }

        .evidence-study {
            font-weight: 600;
            color: var(--text-primary);
        }

        .evidence-year {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .evidence-description {
            margin-top: 0.5rem;
            color: var(--text-secondary);
        }

        .protocol-item {
            background: rgba(139, 92, 246, 0.05);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 3px solid var(--secondary-color);
        }

        .protocol-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .protocol-details {
            display: flex;
            gap: 1rem;
            margin-top: 0.5rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .safety-item {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .safety-icon {
            color: var(--warning-color);
            margin-top: 0.1rem;
        }

        .synergy-tag {
            display: inline-block;
            background: rgba(59, 130, 246, 0.2);
            color: var(--primary-color);
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }

        /* Loading spinner */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* No results message */
        .no-results {
            text-align: center;
            padding: 3rem;
            color: var(--text-secondary);
        }

        .no-results-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }
        
        /* Estilos específicos para o banco de dados */
        .db-section {
            display: none;
        }
        
        .db-section.active {
            display: block;
        }
        
        .tab-navigation {
            border-bottom: 1px solid rgba(59, 130, 246, 0.3);
            margin-bottom: 1.5rem;
        }
        
        .tab-btn {
            padding: 0.75rem 1.5rem;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
            font-weight: 500;
        }
        
        .tab-btn.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }
        
        .tab-btn:hover {
            color: var(--text-primary);
        }
        
        /* Loading spinner para o banco de dados */
        .db-loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
        }
        
        .db-loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top: 4px solid var(--primary-color);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        /* Estilos para o botão "Ver Todas" */
        .show-all-btn {
            background: linear-gradient(135deg, var(--success-color), var(--primary-color));
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .show-all-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(16, 185, 129, 0.3);
        }
        
        /* Estilos para o botão "Exportar" */
        .export-btn {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: var(--text-primary);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .export-btn:hover {
            background: rgba(59, 130, 246, 0.3);
        }
        
        /* Container para opções de visualização */
        .view-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        /* Estilo para o select de itens por página */
        .items-per-page {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .items-per-page select {
            background: var(--card-bg);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: var(--text-primary);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
        }
        
        /* Botões de visualização */
        .view-buttons {
            display: flex;
            gap: 0.5rem;
        }
        
        .view-btn {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: var(--text-primary);
            width: 36px;
            height: 36px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .view-btn.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .view-btn:hover:not(.active) {
            background: rgba(59, 130, 246, 0.3);
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <!-- Modal de informações sobre headphones -->
    <div id="headphoneModal" class="headphone-modal">
        <div class="headphone-content">
            <div class="headphone-icon">
                <i class="fas fa-headphones"></i>
            </div>
            <h2 class="headphone-title">Importante: Use Headphones!</h2>
            <p class="headphone-text">
                Para uma experiência completa e eficaz com as frequências terapêuticas, recomendamos fortemente o uso de headphones de boa qualidade.
            </p>
            
            <div class="headphone-benefits">
                <h4>Benefícios do uso de headphones:</h4>
                <ul>
                    <li>Estimulação binaural precisa</li>
                    <li>Isolamento de ruídos externos</li>
                    <li>Experiência imersiva completa</li>
                    <li>Melhor foco e concentração</li>
                    <li>Resultados otimizados</li>
                </ul>
            </div>
            
            <p class="headphone-text">
                As frequências terapêuticas funcionam melhor quando entregues diretamente aos ouvidos, permitindo que o cérebro processe os estímulos de forma mais eficiente.
            </p>
            
            <button id="closeHeadphoneModal" class="headphone-close">Entendi</button>
            
            <div class="dont-show-again">
                <input type="checkbox" id="dontShowAgain">
                <label for="dontShowAgain">Não mostrar novamente</label>
            </div>
        </div>
    </div>

    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- Cabeçalho com imagem de fundo -->
        <header class="header-with-bg p-8 shadow-2xl rounded-b-2xl" role="banner">
            <div class="header-content container mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
                <div>
                    <h1 class="text-4xl md:text-5xl font-bold harmonizador-title title-glow">Harmonizador Fernandes</h1>
                    <p class="text-blue-200 mt-2 text-lg">Frequências Terapêuticas & Protocolos Personalizados</p>
                </div>
                <div class="flex items-center space-x-4">
                    <!-- hitwebcounter Code START -->
                    <a href="https://www.hitwebcounter.com" target="_blank">
                        <img src="https://hitwebcounter.com/counter/counter.php?page=21436820&style=0006&nbdigits=6&type=ip&initCount=0" title="Conversions and Hits" alt="Conversions and Hits" border="0" />
                    </a>
                    <!-- hitwebcounter Code END -->
                </div>
            </div>
        </header>

        <!-- Seção Hero -->
        <section class="hero-section">
            <div class="hero-content">
                <h2 class="hero-title">Equilibre Sua Energia Vital</h2>
                <p class="hero-subtitle">
                    Descubra o poder das frequências terapêuticas para transformar seu bem-estar físico, mental e emocional com protocolos personalizados e cientificamente desenvolvidos.
                </p>
                
                <div class="hero-features">
                    <div class="hero-feature">
                        <div class="hero-feature-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h3 class="hero-feature-title">Foco & Clareza</h3>
                        <p class="hero-feature-text">Aumente sua concentração e capacidade cognitiva</p>
                    </div>
                    
                    <div class="hero-feature">
                        <div class="hero-feature-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <h3 class="hero-feature-title">Energia Vital</h3>
                        <p class="hero-feature-text">Combata a fadiga e recupere sua vitalidade</p>
                    </div>
                    
                    <div class="hero-feature">
                        <div class="hero-feature-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h3 class="hero-feature-title">Equilíbrio Emocional</h3>
                        <p class="hero-feature-text">Encontre paz interior e bem-estar</p>
                    </div>
                    
                    <div class="hero-feature">
                        <div class="hero-feature-icon">
                            <i class="fas fa-moon"></i>
                        </div>
                        <h3 class="hero-feature-title">Sono Reparador</h3>
                        <p class="hero-feature-text">Melhore a qualidade do seu descanso</p>
                    </div>
                </div>
                
                <button class="hero-cta" onclick="document.getElementById('generatorSection').scrollIntoView({behavior: 'smooth'})">
                    Começar Agora <i class="fas fa-arrow-down ml-2"></i>
                </button>
            </div>
        </section>

        <!-- Navegação por Abas -->
        <div class="tab-navigation mb-8">
            <div class="flex space-x-1">
                <button id="generatorTab" class="tab-btn active" onclick="showSection('generator')">
                    <i class="fas fa-wave-square mr-2"></i>Gerador de Frequências
                </button>
                <button id="databaseTab" class="tab-btn" onclick="showSection('database')">
                    <i class="fas fa-database mr-2"></i>Banco de Dados CAFL
                </button>
            </div>
        </div>

        <!-- Conteúdo Principal -->
        <main>
            <!-- Seção do Gerador de Frequências -->
            <section id="generatorSection" class="db-section active">
                <div class="grid lg:grid-cols-12 gap-8">
                    <!-- Coluna 1: Gerador de Frequências + Histórico -->
                    <div class="lg:col-span-5 space-y-6">
                        <section class="bg-gray-800 rounded-xl p-6 shadow-2xl">
                            <h2 class="text-2xl font-semibold mb-6 text-blue-400" id="generator-heading"><i class="fas fa-wave-square mr-2" aria-hidden="true"></i>Gerador de Frequências</h2>

                            <!-- Protocol Controls (inicialmente oculto) -->
                            <div id="protocolControls" class="protocol-controls hidden mb-6 p-4 bg-gray-900 rounded-lg">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg font-semibold text-purple-400"><i class="fas fa-tasks mr-2" aria-hidden="true"></i><span id="protocolName">Protocolo Ativo</span></h3>
                                    <button id="exitProtocolBtn" class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded-lg text-sm transition" aria-label="Sair do protocolo">
                                        <i class="fas fa-times mr-1" aria-hidden="true"></i>Sair
                                    </button>
                                </div>
                                <!-- Progress Bar -->
                                <div class="mb-4">
                                    <div class="flex justify-between text-sm mb-1">
                                        <span>Progresso do Protocolo</span>
                                        <span id="protocolProgressText">0/0</span>
                                    </div>
                                    <div class="w-full bg-gray-700 rounded-full h-2.5" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                                        <div id="protocolProgressBar" class="bg-purple-600 h-2.5 rounded-full transition-all duration-300" style="width: 0%"></div>
                                    </div>
                                </div>
                                <!-- Step Indicators -->
                                <div id="stepIndicators" class="flex flex-wrap gap-2 mb-4" role="tablist">
                                    <!-- Indicadores serão adicionados dinamicamente -->
                                </div>
                                <!-- Step Navigation -->
                                <div class="flex justify-between">
                                    <button id="prevStepBtn" class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed" aria-label="Passo anterior">
                                        <i class="fas fa-chevron-left mr-2" aria-hidden="true"></i>Anterior
                                    </button>
                                    <div class="text-center">
                                        <div class="text-sm text-gray-400">Passo Atual</div>
                                        <div id="currentStepName" class="font-medium">-</div>
                                    </div>
                                    <button id="nextStepBtn" class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed" aria-label="Próximo passo">
                                        Próximo<i class="fas fa-chevron-right ml-2" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </div>

                            <div class="space-y-4">
                                <!-- Frequency Input e Visualizer -->
                                <div class="frequency-input-group">
                                    <div class="frequency-controls">
                                        <label for="frequency" class="block text-sm font-medium mb-2">Frequência (Hz)</label>
                                        <div class="flex gap-2">
                                            <input type="number" id="frequency" class="flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 transition" placeholder="Digite a frequência" value="40" min="20" max="20000" step="1" aria-describedby="frequency-description">
                                            <button id="playBtn" class="bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg font-medium transition transform hover:scale-105" aria-label="Tocar frequência">
                                                <i class="fas fa-play mr-2" aria-hidden="true"></i>Tocar
                                            </button>
                                            <button id="stopBtn" class="bg-red-600 hover:bg-red-700 px-6 py-2 rounded-lg font-medium transition transform hover:scale-105 hidden" aria-label="Parar frequência">
                                                <i class="fas fa-stop mr-2" aria-hidden="true"></i>Parar
                                            </button>
                                        </div>
                                        <div id="frequency-description" class="sr-only">Insira uma frequência entre 20 Hz e 20.000 Hz</div>
                                    </div>
                                    <div class="wave-visualizer-small bg-gray-900 rounded-lg p-2">
                                        <h3 class="text-xs font-medium mb-1 text-gray-400 text-center">Onda em Tempo Real</h3>
                                        <canvas id="waveCanvas" width="120" height="80" class="w-full h-full rounded" aria-label="Visualização da forma de onda"></canvas>
                                    </div>
                                </div>

                                <!-- Volume Control -->
                                <div>
                                    <label for="volume" class="block text-sm font-medium mb-2">Volume: <span id="volumeValue">50</span>%</label>
                                    <input type="range" id="volume" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer" min="0" max="100" value="50" aria-describedby="volume-description">
                                    <div id="volume-description" class="sr-only">Ajuste o volume de 0% a 100%</div>
                                </div>

                                <!-- Wave Type Selection -->
                                <div>
                                    <label class="block text-sm font-medium mb-2">Tipo de Onda</label>
                                    <div class="grid grid-cols-4 gap-2">
                                        <button class="wave-type-btn bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded-lg text-sm transition" data-wave="sine" aria-label="Onda Senoidal">
                                            <i class="fas fa-wave-square mr-1" aria-hidden="true"></i>Senoidal
                                        </button>
                                        <button class="wave-type-btn bg-gray-700 hover:bg-gray-700 px-3 py-2 rounded-lg text-sm transition" data-wave="square" aria-label="Onda Quadrada">
                                            <i class="fas fa-square-wave mr-1" aria-hidden="true"></i>Quadrada
                                        </button>
                                        <button class="wave-type-btn bg-gray-700 hover:bg-gray-700 px-3 py-2 rounded-lg text-sm transition" data-wave="sawtooth" aria-label="Onda Dente de Serra">
                                            <i class="fas fa-wave-triangle mr-1" aria-hidden="true"></i>Serra
                                        </button>
                                        <button class="wave-type-btn bg-gray-700 hover:bg-gray-700 px-3 py-2 rounded-lg text-sm transition" data-wave="triangle" aria-label="Onda Triangular">
                                            <i class="fas fa-wave-triangle mr-1" aria-hidden="true"></i>Triangular
                                        </button>
                                    </div>
                                </div>

                                <!-- Timer -->
                                <div>
                                    <button id="timerBtn" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg font-medium transition transform hover:scale-105 w-full" aria-label="Definir timer">
                                        <i class="fas fa-clock mr-2" aria-hidden="true"></i>Programar Timer
                                    </button>
                                </div>
                                <div class="mt-3 bg-gray-900 rounded-lg p-3 hidden" id="timerContainer">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-sm text-gray-400">Tempo Restante</span>
                                        <div id="timerDisplay" class="timer-display text-blue-400">00:00:00</div>
                                    </div>
                                    <div class="w-full bg-gray-700 rounded-full h-2">
                                        <div id="timerProgress" class="timer-progress bg-purple-600 h-full rounded-full" style="width: 0%"></div>
                                    </div>
                                </div>

                                <!-- Benefícios das Frequências -->
                                <div class="space-y-3">
                                    <div class="benefit-card">
                                        <h4><i class="fas fa-bolt text-yellow-400"></i> Energia e Vitalidade</h4>
                                        <p>Frequências específicas como 25 Hz e 50 Hz ajudam a aumentar os níveis de energia, combater a fadiga e melhorar a disposição para atividades diárias.</p>
                                    </div>
                                    
                                    <div class="benefit-card">
                                        <h4><i class="fas fa-brain text-blue-400"></i> Foco e Concentração</h4>
                                        <p>Frequências na faixa de 40 Hz (ondas Gama) estão associadas à melhora da cognição, memória e capacidade de concentração prolongada.</p>
                                    </div>
                                    
                                    <div class="benefit-card">
                                        <h4><i class="fas fa-heart text-red-400"></i> Bem-Estar Emocional</h4>
                                        <p>Frequências como 285 Hz e 639 Hz podem ajudar a reduzir sintomas de depressão, ansiedade e promover equilíbrio emocional.</p>
                                    </div>
                                </div>

                                <!-- Current Frequency Info -->
                                <div id="currentInfo" class="bg-gray-900 rounded-lg p-4">
                                    <div class="text-xl font-bold text-blue-400">40 Hz</div>
                                    <div class="text-lg font-medium">Foco e Concentração</div>
                                </div>
                                <div id="currentDetails" class="bg-gray-900 rounded-lg p-4 text-sm">
                                    <div><strong>Categoria:</strong> <span class="category-badge bg-blue-600">Concentração</span></div>
                                    <div><strong>Descrição:</strong> Frequência para melhorar foco cognitivo e clareza mental.</div>
                                </div>
                                <div id="waveRecommendation" class="bg-gray-900 rounded-lg p-4 text-sm">
                                    <div class="flex items-center gap-2">
                                        <i class="fas fa-lightbulb text-yellow-500"></i>
                                        <span><strong>Onda recomendada:</strong> Senoidal - Proporciona uma experiência mais suave e agradável para estimulação cognitiva.</span>
                                    </div>
                                </div>

                                <!-- Favorite Button -->
                                <button id="favoriteBtn" class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg font-medium transition w-full" aria-label="Adicionar aos favoritos">
                                    <i class="far fa-star mr-2"></i>Adicionar aos Favoritos
                                </button>
                            </div>
                        </section>

                        <!-- Seção de Histórico -->
                        <section class="bg-gray-800 rounded-xl p-6 shadow-2xl" aria-labelledby="history-heading">
                            <h3 id="history-heading" class="text-lg font-semibold mb-4 text-purple-400"><i class="fas fa-history mr-2" aria-hidden="true"></i>Histórico Recente</h3>
                            <div id="historyList" class="space-y-1 max-h-32 overflow-y-auto" aria-live="polite">
                                <!-- Itens do histórico serão adicionados aqui -->
                            </div>
                        </section>
                    </div>

                    <!-- Coluna 2: Banco de Dados de Frequências -->
                    <div class="lg:col-span-7 space-y-6">
                        <section class="bg-gray-800 rounded-xl p-6 shadow-2xl" aria-labelledby="database-heading">
                            <div class="flex justify-between items-center mb-6">
                                <h2 id="database-heading" class="text-2xl font-semibold text-green-400"><i class="fas fa-database mr-2" aria-hidden="true"></i>Banco de Dados de Frequências Terapêuticas</h2>
                                <div class="text-sm text-gray-400"><span id="resultCount">0</span> resultados</div>
                            </div>
                            
                            <!-- Filtros Avançados -->
                            <div class="filter-section">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg font-semibold text-blue-400">Filtros Avançados</h3>
                                    <div>
                                        <button id="showAllBtn" class="show-all-btn mr-2">
                                            <i class="fas fa-list"></i> Ver Todas
                                        </button>
                                        <button id="exportBtn" class="export-btn">
                                            <i class="fas fa-download"></i> Exportar
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="filter-group">
                                        <label for="searchInput" class="filter-label">Buscar</label>
                                        <input type="text" id="searchInput" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 transition" placeholder="Nome, descrição ou categoria">
                                    </div>
                                    
                                    <div class="filter-group">
                                        <label for="categoryFilter" class="filter-label">Categoria</label>
                                        <select id="categoryFilter" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 transition">
                                            <option value="all">Todas as Categorias</option>
                                            <option value="Concentração">Concentração</option>
                                            <option value="Relaxamento">Relaxamento</option>
                                            <option value="Energia">Energia</option>
                                            <option value="Sono">Sono</option>
                                            <option value="Dor">Dor</option>
                                            <option value="Cura">Cura</option>
                                        </select>
                                    </div>
                                    
                                    <div class="filter-group">
                                        <label class="filter-label">Faixa de Frequência (Hz)</label>
                                        <div class="range-slider-container">
                                            <input type="number" id="minFrequency" class="bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 w-24 focus:outline-none focus:ring-2 focus:ring-blue-500 transition" placeholder="Min" min="0" max="20000">
                                            <span class="text-gray-400">a</span>
                                            <input type="number" id="maxFrequency" class="bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 w-24 focus:outline-none focus:ring-2 focus:ring-blue-500 transition" placeholder="Max" min="0" max="20000">
                                        </div>
                                    </div>
                                    
                                    <div class="filter-group">
                                        <label for="evidenceFilter" class="filter-label">Nível de Evidência</label>
                                        <select id="evidenceFilter" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 transition">
                                            <option value="all">Todos os Níveis</option>
                                            <option value="high">Alta</option>
                                            <option value="medium">Média</option>
                                            <option value="low">Baixa</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="mt-4">
                                    <button id="applyFiltersBtn" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-medium transition w-full">
                                        <i class="fas fa-filter mr-2"></i>Aplicar Filtros
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Opções de visualização -->
                            <div class="view-options">
                                <div class="items-per-page">
                                    <span class="text-sm text-gray-400">Itens por página:</span>
                                    <select id="itemsPerPageSelect" class="bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm">
                                        <option value="10">10</option>
                                        <option value="20" selected>20</option>
                                        <option value="50">50</option>
                                        <option value="100">100</option>
                                        <option value="all">Todos</option>
                                    </select>
                                </div>
                                
                                <div class="view-buttons">
                                    <button id="gridViewBtn" class="view-btn active" title="Visualização em grade">
                                        <i class="fas fa-th"></i>
                                    </button>
                                    <button id="listViewBtn" class="view-btn" title="Visualização em lista">
                                        <i class="fas fa-list"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Container de Resultados -->
                            <div id="databaseContainer" class="database-container mt-4">
                                <div class="db-loading">
                                    <div class="db-loading-spinner"></div>
                                </div>
                            </div>
                            
                            <!-- Container de paginação -->
                            <div id="paginationContainer" class="pagination-container">
                                <!-- Os controles de paginação serão adicionados dinamicamente -->
                            </div>
                        </section>
                    </div>
                </div>
            </section>

            <!-- Seção do Banco de Dados CAFL -->
            <section id="databaseSection" class="db-section">
                <div class="bg-gray-800 rounded-xl p-6 shadow-2xl">
                    <h2 class="text-2xl font-semibold mb-6 text-green-400"><i class="fas fa-database mr-2" aria-hidden="true"></i>Banco de Dados CAFL Completo</h2>
                    
                    <div class="filter-section">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-blue-400">Filtros do Banco de Dados</h3>
                            <div>
                                <button id="showAllCAFLBtn" class="show-all-btn mr-2">
                                    <i class="fas fa-list"></i> Ver Todas
                                </button>
                                <button id="exportCAFLBtn" class="export-btn">
                                    <i class="fas fa-download"></i> Exportar
                                </button>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="filter-group">
                                <label for="caflSearchInput" class="filter-label">Buscar</label>
                                <input type="text" id="caflSearchInput" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 transition" placeholder="Nome, descrição ou categoria">
                            </div>
                            
                            <div class="filter-group">
                                <label for="caflCategoryFilter" class="filter-label">Categoria</label>
                                <select id="caflCategoryFilter" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 transition">
                                    <option value="all">Todas as Categorias</option>
                                    <option value="Concentração">Concentração</option>
                                    <option value="Relaxamento">Relaxamento</option>
                                    <option value="Energia">Energia</option>
                                    <option value="Sono">Sono</option>
                                    <option value="Dor">Dor</option>
                                    <option value="Cura">Cura</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <button id="applyCAFLFiltersBtn" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-medium transition w-full">
                                <i class="fas fa-filter mr-2"></i>Aplicar Filtros
                            </button>
                        </div>
                    </div>
                    
                    <!-- Opções de visualização -->
                    <div class="view-options">
                        <div class="items-per-page">
                            <span class="text-sm text-gray-400">Itens por página:</span>
                            <select id="caflItemsPerPageSelect" class="bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm">
                                <option value="10">10</option>
                                <option value="20" selected>20</option>
                                <option value="50">50</option>
                                <option value="100">100</option>
                                <option value="all">Todos</option>
                            </select>
                        </div>
                        
                        <div class="view-buttons">
                            <button id="caflGridViewBtn" class="view-btn active" title="Visualização em grade">
                                <i class="fas fa-th"></i>
                            </button>
                            <button id="caflListViewBtn" class="view-btn" title="Visualização em lista">
                                <i class="fas fa-list"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Container de Resultados -->
                    <div id="caflDatabaseContainer" class="database-container mt-4">
                        <div class="db-loading">
                            <div class="db-loading-spinner"></div>
                        </div>
                    </div>
                    
                    <!-- Container de paginação -->
                    <div id="caflPaginationContainer" class="pagination-container">
                        <!-- Os controles de paginação serão adicionados dinamicamente -->
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Botão voltar ao topo -->
    <button id="topBtn" title="Voltar ao topo">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script>
        // Variáveis globais
        let audioContext;
        let oscillator;
        let gainNode;
        let analyser;
        let isPlaying = false;
        let currentWaveType = 'sine';
        let animationId;
        let protocolActive = false;
        let currentProtocol = null;
        let currentStepIndex = 0;
        let timerInterval;
        let timerSeconds = 0;
        let timerDuration = 0;
        
        // Variáveis para controle de paginação
        let currentPage = 1;
        let itemsPerPage = 20;
        let allFrequencies = [];
        let filteredFrequencies = [];
        
        // Variáveis para o banco de dados CAFL
        let caflCurrentPage = 1;
        let caflItemsPerPage = 20;
        let allCAFLFrequencies = [];
        let filteredCAFLFrequencies = [];
        
        // Dados de exemplo para o banco de frequências
        const frequencyDatabase = [
            { id: 1, name: "Foco e Concentração", value: 40, category: "Concentração", description: "Frequência para melhorar foco cognitivo e clareza mental.", evidence: "high" },
            { id: 2, name: "Relaxamento Profundo", value: 10, category: "Relaxamento", description: "Promove estado de relaxamento profundo e meditação.", evidence: "medium" },
            { id: 3, name: "Energia Vital", value: 25, category: "Energia", description: "Aumenta os níveis de energia e combate a fadiga.", evidence: "high" },
            { id: 4, name: "Sono Reparador", value: 3.5, category: "Sono", description: "Induz sono profundo e reparador.", evidence: "medium" },
            { id: 5, name: "Alívio da Dor", value: 100, category: "Dor", description: "Ajuda a reduzir dores crônicas e inflamações.", evidence: "low" },
            { id: 6, name: "Cura Celular", value: 528, category: "Cura", description: "Frequência associada à cura e reparação celular.", evidence: "low" },
            { id: 7, name: "Clareza Mental", value: 85, category: "Concentração", description: "Melhora a clareza do pensamento e a tomada de decisões.", evidence: "medium" },
            { id: 8, name: "Redução de Ansiedade", value: 6, category: "Relaxamento", description: "Reduz sintomas de ansiedade e estresse.", evidence: "high" },
            { id: 9, name: "Vitalidade Matinal", value: 15, category: "Energia", description: "Energia para começar o dia com disposição.", evidence: "medium" },
            { id: 10, name: "Sono REM", value: 2.5, category: "Sono", description: "Estimula o sono REM, essencial para a consolidação da memória.", evidence: "low" },
            { id: 11, name: "Alívio de Dor de Cabeça", value: 120, category: "Dor", description: "Ajuda a aliviar dores de cabeça tensionais.", evidence: "medium" },
            { id: 12, name: "Equilíbrio Emocional", value: 432, category: "Cura", description: "Promove equilíbrio emocional e bem-estar.", evidence: "low" },
            { id: 13, name: "Foco Intenso", value: 65, category: "Concentração", description: "Para períodos de foco intenso e prolongado.", evidence: "medium" },
            { id: 14, name: "Meditação Guiada", value: 8, category: "Relaxamento", description: "Frequência ideal para práticas de meditação.", evidence: "high" },
            { id: 15, name: "Energia para Exercícios", value: 30, category: "Energia", description: "Aumenta a energia e resistência durante atividades físicas.", evidence: "medium" },
            { id: 16, name: "Sono Profundo", value: 1.5, category: "Sono", description: "Induz estágios mais profundos do sono.", evidence: "medium" },
            { id: 17, name: "Alívio de Dor Muscular", value: 80, category: "Dor", description: "Ajuda a aliviar dores musculares e tensões.", evidence: "low" },
            { id: 18, name: "Harmonização Corporal", value: 396, category: "Cura", description: "Harmoniza os sistemas do corpo e promove cura.", evidence: "low" },
            { id: 19, name: "Estudo e Aprendizagem", value: 50, category: "Concentração", description: "Melhora a capacidade de retenção de informações.", evidence: "high" },
            { id: 20, name: "Relaxamento Rápido", value: 12, category: "Relaxamento", description: "Induz relaxamento rápido em situações de estresse.", evidence: "medium" },
            { id: 21, name: "Energia Mental", value: 35, category: "Energia", description: "Aumenta a energia mental para tarefas cognitivas.", evidence: "medium" },
            { id: 22, name: "Sono Leve", value: 4.5, category: "Sono", description: "Promove transição suave para o sono.", evidence: "low" },
            { id: 23, name: "Alívio de Dor Articular", value: 150, category: "Dor", description: "Ajuda a reduzir dores articulares.", evidence: "low" },
            { id: 24, name: "Cura Emocional", value: 639, category: "Cura", description: "Frequência para cura emocional e relacionamentos.", evidence: "low" },
            { id: 25, name: "Criatividade", value: 75, category: "Concentração", description: "Estimula a criatividade e o pensamento inovador.", evidence: "medium" },
            { id: 26, name: "Paz Interior", value: 7, category: "Relaxamento", description: "Promove sensação de paz e tranquilidade.", evidence: "high" },
            { id: 27, name: "Vitalidade Geral", value: 20, category: "Energia", description: "Aumenta a vitalidade geral do corpo.", evidence: "medium" },
            { id: 28, name: "Despertar Suave", value: 5.5, category: "Sono", description: "Para despertar de forma suave e descansada.", evidence: "low" },
            { id: 29, name: "Alívio de Dor Crônica", value: 200, category: "Dor", description: "Ajuda no manejo de dores crônicas.", evidence: "low" },
            { id: 30, name: "Conexão Espiritual", value: 741, category: "Cura", description: "Frequência para despertar intuition e conexão espiritual.", evidence: "low" }
        ];
        
        // Dados de exemplo para o banco de dados CAFL
        const caflDatabase = [
            { id: 101, name: "Abcessos", value: 304, category: "Cura", description: "Frequência para tratamento de abcessos.", evidence: "medium" },
            { id: 102, name: "Adrenal", value: 492.8, category: "Cura", description: "Estimulação das glândulas adrenais.", evidence: "low" },
            { id: 103, name: "Alergias", value: 385, category: "Cura", description: "Redução de sintomas alérgicos.", evidence: "medium" },
            { id: 104, name: "Amigdalite", value: 465, category: "Cura", description: "Tratamento de inflamação das amígdalas.", evidence: "medium" },
            { id: 105, name: "Ansiedade", value: 7.83, category: "Relaxamento", description: "Redução de ansiedade e estresse.", evidence: "high" },
            { id: 106, name: "Artrite", value: 250, category: "Dor", description: "Alívio de sintomas de artrite.", evidence: "medium" },
            { id: 107, name: "Asma", value: 355, category: "Cura", description: "Melhora dos sintomas de asma.", evidence: "medium" },
            { id: 108, name: "Bursite", value: 2720, category: "Dor", description: "Tratamento de inflamação das bursas.", evidence: "low" },
            { id: 109, name: "Câncer", value: 2127, category: "Cura", description: "Frequências experimentais para tratamento complementar.", evidence: "low" },
            { id: 110, name: "Candidíase", value: 464, category: "Cura", description: "Tratamento de infecções por Candida.", evidence: "medium" },
            { id: 111, name: "Cefaleia", value: 10, category: "Dor", description: "Alívio de dores de cabeça.", evidence: "high" },
            { id: 112, name: "Circulação", value: 3.39, category: "Cura", description: "Melhora da circulação sanguínea.", evidence: "medium" },
            { id: 113, name: "Cistite", value: 880, category: "Cura", description: "Tratamento de infecções urinárias.", evidence: "medium" },
            { id: 114, name: "Cólica", value: 880, category: "Dor", description: "Alívio de cólicas abdominais.", evidence: "medium" },
            { id: 115, name: "Concentração", value: 40, category: "Concentração", description: "Melhora do foco e concentração.", evidence: "high" },
            { id: 116, name: "Depressão", value: 440, category: "Relaxamento", description: "Alívio de sintomas depressivos.", evidence: "medium" },
            { id: 117, name: "Dermatite", value: 332, category: "Cura", description: "Tratamento de inflamações cutâneas.", evidence: "low" },
            { id: 118, name: "Desintoxicação", value: 304, category: "Cura", description: "Estímulo aos processos de desintoxicação.", evidence: "medium" },
            { id: 119, name: "Diabetes", value: 342, category: "Cura", description: "Regulação dos níveis de açúcar no sangue.", evidence: "low" },
            { id: 120, name: "Dor Lombar", value: 120, category: "Dor", description: "Alívio de dores na região lombar.", evidence: "medium" },
            { id: 121, name: "Energia", value: 25, category: "Energia", description: "Aumento dos níveis de energia.", evidence: "high" },
            { id: 122, name: "Enxaqueca", value: 160, category: "Dor", description: "Alívio de enxaquecas.", evidence: "medium" },
            { id: 123, name: "Fadiga Crônica", value: 304, category: "Energia", description: "Tratamento da fadiga crônica.", evidence: "medium" },
            { id: 124, name: "Fibromialgia", value: 880, category: "Dor", description: "Alívio de dores da fibromialgia.", evidence: "medium" },
            { id: 125, name: "Gripe", value: 465, category: "Cura", description: "Tratamento de sintomas da gripe.", evidence: "medium" },
            { id: 126, name: "Hemorróidas", value: 1800, category: "Cura", description: "Tratamento de hemorróidas.", evidence: "low" },
            { id: 127, name: "Hérnia de Disco", value: 880, category: "Dor", description: "Alívio de dores por hérnia de disco.", evidence: "low" },
            { id: 128, name: "Hipertensão", value: 3.39, category: "Cura", description: "Redução da pressão arterial.", evidence: "medium" },
            { id: 129, name: "Hipotireoidismo", value: 20, category: "Cura", description: "Estímulo da tireoide.", evidence: "low" },
            { id: 130, name: "Insônia", value: 3.5, category: "Sono", description: "Tratamento da insônia.", evidence: "high" },
            { id: 131, name: "Joelhos", value: 440, category: "Dor", description: "Fortalecimento das articulações dos joelhos.", evidence: "medium" },
            { id: 132, name: "Labirintite", value: 20, category: "Cura", description: "Tratamento de labirintite.", evidence: "medium" },
            { id: 133, name: "Memória", value: 40, category: "Concentração", description: "Melhora da memória e cognição.", evidence: "high" },
            { id: 134, name: "Menopausa", value: 880, category: "Cura", description="Alívio de sintomas da menopausa.", evidence: "medium" },
            { id: 135, name: "Migrânea", value: 160, category: "Dor", description: "Alívio de dores de migrânea.", evidence: "medium" },
            { id: 136, name: "Ossos", value: 7.83, category: "Cura", description: "Fortalecimento ósseo.", evidence: "low" },
            { id: 137, name: "Pâncreas", value: 342, category: "Cura", description: "Estímulo das funções pancreáticas.", evidence: "low" },
            { id: 138, name: "Próstata", value: 880, category: "Cura", description: "Saúde da próstata.", evidence: "medium" },
            { id: 139, name: "Relaxamento", value: 10, category: "Relaxamento", description: "Indução de relaxamento profundo.", evidence: "high" },
            { id: 140, name: "Rinite", value: 355, category: "Cura", description: "Alívio de sintomas de rinite.", evidence: "medium" },
            { id: 141, name: "Sinusite", value: 465, category: "Cura", description: "Tratamento de sinusite.", evidence: "medium" },
            { id: 142, name: "Sono", value: 3.5, category: "Sono", description: "Indução de sono reparador.", evidence: "high" },
            { id: 143, name: "Stress", value: 7.83, category: "Relaxamento", description: "Redução do estresse.", evidence: "high" },
            { id: 144, name: "Tendinite", value: 2720, category: "Dor", description: "Tratamento de inflamações nos tendões.", evidence: "medium" },
            { id: 145, name: "Tensão Muscular", value: 120, category: "Dor", description: "Alívio de tensões musculares.", evidence: "high" },
            { id: 146, name: "Tireoide", value: 20, category: "Cura", description: "Equilíbrio da função tireoidiana.", evidence: "medium" },
            { id: 147, name: "Úlceras", value: 880, category: "Cura", description: "Tratamento de úlceras gástricas.", evidence: "medium" },
            { id: 148, name: "Varizes", value: 304, category: "Cura", description: "Melhora da circulação e redução de varizes.", evidence: "low" },
            { id: 149, name: "Vesícula", value: 304, category: "Cura", description: "Estímulo das funções da vesícula biliar.", evidence: "medium" },
            { id: 150, name: "Vírus", value: 464, category: "Cura", description: "Tratamento de infecções virais.", evidence: "medium" }
        ];

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar o contexto de áudio
            initAudioContext();
            
            // Configurar event listeners
            setupEventListeners();
            
            // Carregar dados
            loadAllFrequencies();
            loadCAFLDatabase();
            
            // Verificar se o modal de headphones deve ser exibido
            checkHeadphoneModal();
            
            // Configurar botão voltar ao topo
            setupScrollToTop();
        });

        // Função para inicializar o contexto de áudio
        function initAudioContext() {
            try {
                window.AudioContext = window.AudioContext || window.webkitAudioContext;
                audioContext = new AudioContext();
                
                // Configurar nós de áudio
                oscillator = audioContext.createOscillator();
                gainNode = audioContext.createGain();
                analyser = audioContext.createAnalyser();
                
                // Conectar os nós
                oscillator.connect(gainNode);
                gainNode.connect(analyser);
                analyser.connect(audioContext.destination);
                
                // Configurar o analisador
                analyser.fftSize = 2048;
                
                // Iniciar o oscilador
                oscillator.start();
                oscillator.stop();
                
                // Configurar valores iniciais
                oscillator.type = currentWaveType;
                gainNode.gain.value = 0.5;
            } catch (e) {
                console.error('Erro ao inicializar o contexto de áudio:', e);
                alert('Seu navegador não suporta a Web Audio API. Por favor, use um navegador mais recente.');
            }
        }

        // Função para configurar os event listeners
        function setupEventListeners() {
            // Botões de reprodução
            document.getElementById('playBtn').addEventListener('click', playFrequency);
            document.getElementById('stopBtn').addEventListener('click', stopFrequency);
            
            // Controle de volume
            document.getElementById('volume').addEventListener('input', function() {
                const volume = this.value / 100;
                document.getElementById('volumeValue').textContent = this.value;
                if (gainNode) {
                    gainNode.gain.value = volume;
                }
            });
            
            // Seleção de tipo de onda
            document.querySelectorAll('.wave-type-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.wave-type-btn').forEach(b => {
                        b.classList.remove('bg-blue-600');
                        b.classList.add('bg-gray-700');
                    });
                    this.classList.remove('bg-gray-700');
                    this.classList.add('bg-blue-600');
                    currentWaveType = this.dataset.wave;
                    if (oscillator) {
                        oscillator.type = currentWaveType;
                    }
                });
            });
            
            // Timer
            document.getElementById('timerBtn').addEventListener('click', setupTimer);
            
            // Botão de favoritos
            document.getElementById('favoriteBtn').addEventListener('click', toggleFavorite);
            
            // Botões de aba
            document.getElementById('generatorTab').addEventListener('click', () => showSection('generator'));
            document.getElementById('databaseTab').addEventListener('click', () => showSection('database'));
            
            // Modal de headphones
            document.getElementById('closeHeadphoneModal').addEventListener('click', closeHeadphoneModal);
            document.getElementById('dontShowAgain').addEventListener('change', function() {
                if (this.checked) {
                    localStorage.setItem('dontShowHeadphoneModal', 'true');
                } else {
                    localStorage.removeItem('dontShowHeadphoneModal');
                }
            });
            
            // Botões de filtro
            document.getElementById('showAllBtn').addEventListener('click', showAllFrequencies);
            document.getElementById('exportBtn').addEventListener('click', exportFrequencies);
            document.getElementById('applyFiltersBtn').addEventListener('click', applyFilters);
            
            // Filtros individuais
            document.getElementById('searchInput').addEventListener('input', debounce(applyFilters, 300));
            document.getElementById('categoryFilter').addEventListener('change', applyFilters);
            document.getElementById('minFrequency').addEventListener('input', debounce(applyFilters, 300));
            document.getElementById('maxFrequency').addEventListener('input', debounce(applyFilters, 300));
            document.getElementById('evidenceFilter').addEventListener('change', applyFilters);
            
            // Itens por página
            document.getElementById('itemsPerPageSelect').addEventListener('change', function() {
                itemsPerPage = this.value === 'all' ? allFrequencies.length : parseInt(this.value);
                currentPage = 1;
                displayFrequencies();
            });
            
            // Visualização
            document.getElementById('gridViewBtn').addEventListener('click', function() {
                document.getElementById('databaseContainer').classList.remove('list-view');
                document.getElementById('databaseContainer').classList.add('grid-view');
                this.classList.add('active');
                document.getElementById('listViewBtn').classList.remove('active');
            });
            
            document.getElementById('listViewBtn').addEventListener('click', function() {
                document.getElementById('databaseContainer').classList.remove('grid-view');
                document.getElementById('databaseContainer').classList.add('list-view');
                this.classList.add('active');
                document.getElementById('gridViewBtn').classList.remove('active');
            });
            
            // Botões do banco de dados CAFL
            document.getElementById('showAllCAFLBtn').addEventListener('click', showAllCAFLFrequencies);
            document.getElementById('exportCAFLBtn').addEventListener('click', exportCAFLFrequencies);
            document.getElementById('applyCAFLFiltersBtn').addEventListener('click', applyCAFLFilters);
            
            // Filtros individuais do CAFL
            document.getElementById('caflSearchInput').addEventListener('input', debounce(applyCAFLFilters, 300));
            document.getElementById('caflCategoryFilter').addEventListener('change', applyCAFLFilters);
            
            // Itens por página do CAFL
            document.getElementById('caflItemsPerPageSelect').addEventListener('change', function() {
                caflItemsPerPage = this.value === 'all' ? allCAFLFrequencies.length : parseInt(this.value);
                caflCurrentPage = 1;
                displayCAFLFrequencies();
            });
            
            // Visualização do CAFL
            document.getElementById('caflGridViewBtn').addEventListener('click', function() {
                document.getElementById('caflDatabaseContainer').classList.remove('list-view');
                document.getElementById('caflDatabaseContainer').classList.add('grid-view');
                this.classList.add('active');
                document.getElementById('caflListViewBtn').classList.remove('active');
            });
            
            document.getElementById('caflListViewBtn').addEventListener('click', function() {
                document.getElementById('caflDatabaseContainer').classList.remove('grid-view');
                document.getElementById('caflDatabaseContainer').classList.add('list-view');
                this.classList.add('active');
                document.getElementById('caflGridViewBtn').classList.remove('active');
            });
            
            // Controles de protocolo
            document.getElementById('exitProtocolBtn').addEventListener('click', exitProtocol);
            document.getElementById('prevStepBtn').addEventListener('click', prevProtocolStep);
            document.getElementById('nextStepBtn').addEventListener('click', nextProtocolStep);
            
            // Atualizar informações da frequência atual
            document.getElementById('frequency').addEventListener('input', updateCurrentFrequencyInfo);
        }

        // Função para carregar todas as frequências
        function loadAllFrequencies() {
            allFrequencies = [...frequencyDatabase];
            filteredFrequencies = [...allFrequencies];
            displayFrequencies();
        }

        // Função para carregar o banco de dados CAFL
        function loadCAFLDatabase() {
            allCAFLFrequencies = [...caflDatabase];
            filteredCAFLFrequencies = [...allCAFLFrequencies];
            displayCAFLFrequencies();
        }

        // Função para exibir as frequências
        function displayFrequencies() {
            const container = document.getElementById('databaseContainer');
            container.innerHTML = '';
            
            if (filteredFrequencies.length === 0) {
                container.innerHTML = `
                    <div class="no-results">
                        <div class="no-results-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3>Nenhum resultado encontrado</h3>
                        <p>Tente ajustar seus filtros ou termos de busca.</p>
                    </div>
                `;
                updateResultCount(0);
                return;
            }
            
            // Calcular paginação
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = Math.min(startIndex + itemsPerPage, filteredFrequencies.length);
            const paginatedItems = filteredFrequencies.slice(startIndex, endIndex);
            
            // Determinar o tipo de visualização
            const isListView = document.getElementById('databaseContainer').classList.contains('list-view');
            
            // Criar o container de itens
            const itemsContainer = document.createElement('div');
            itemsContainer.className = isListView ? 'space-y-3' : 'grid grid-cols-1 md:grid-cols-2 gap-4';
            
            // Adicionar cada frequência
            paginatedItems.forEach(freq => {
                const card = createFrequencyCard(freq, isListView);
                itemsContainer.appendChild(card);
            });
            
            container.appendChild(itemsContainer);
            
            // Atualizar contadores e paginação
            updateResultCount(filteredFrequencies.length);
            updatePagination();
        }

        // Função para criar um card de frequência
        function createFrequencyCard(freq, isListView = false) {
            const card = document.createElement('div');
            card.className = `frequency-card bg-gray-700 rounded-lg p-4 ${isListView ? '' : 'h-full'}`;
            
            const evidenceClass = freq.evidence ? `evidence-${freq.evidence}` : '';
            const evidenceText = getEvidenceText(freq.evidence);
            
            card.innerHTML = `
                <div class="${isListView ? 'flex justify-between items-center' : ''}">
                    <div class="${isListView ? 'flex-1' : ''}">
                        <h3 class="text-lg font-semibold mb-1">${freq.name}</h3>
                        <p class="text-gray-400 text-sm mb-2">${freq.description}</p>
                        <div class="flex flex-wrap gap-2 mb-3">
                            <span class="category-badge bg-blue-600">${freq.category}</span>
                            ${freq.evidence ? `<span class="evidence-badge ${evidenceClass}">${evidenceText}</span>` : ''}
                        </div>
                    </div>
                    <div class="${isListView ? 'ml-4 text-right' : 'mt-3'}">
                        <div class="text-2xl font-bold text-blue-400">${freq.value} Hz</div>
                        <button class="mt-2 bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded-lg text-sm transition w-full" onclick="playFrequencyFromCard(${freq.value})">
                            <i class="fas fa-play mr-1"></i>Tocar
                        </button>
                    </div>
                </div>
            `;
            
            return card;
        }

        // Função para obter o texto do nível de evidência
        function getEvidenceText(evidence) {
            switch(evidence) {
                case 'high': return 'Alta';
                case 'medium': return 'Média';
                case 'low': return 'Baixa';
                default: return '';
            }
        }

        // Função para atualizar o contador de resultados
        function updateResultCount(count) {
            document.getElementById('resultCount').textContent = count;
        }

        // Função para atualizar a paginação
        function updatePagination() {
            const container = document.getElementById('paginationContainer');
            container.innerHTML = '';
            
            const totalPages = Math.ceil(filteredFrequencies.length / itemsPerPage);
            
            if (totalPages <= 1) {
                container.style.display = 'none';
                return;
            }
            
            container.style.display = 'flex';
            
            // Botão "Anterior"
            const prevBtn = document.createElement('button');
            prevBtn.className = `pagination-btn ${currentPage === 1 ? 'disabled' : ''}`;
            prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i> Anterior';
            prevBtn.disabled = currentPage === 1;
            prevBtn.addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    displayFrequencies();
                }
            });
            container.appendChild(prevBtn);
            
            // Informação da página
            const pageInfo = document.createElement('div');
            pageInfo.className = 'pagination-info';
            pageInfo.textContent = `Página ${currentPage} de ${totalPages} (${filteredFrequencies.length} resultados)`;
            container.appendChild(pageInfo);
            
            // Botão "Próximo"
            const nextBtn = document.createElement('button');
            nextBtn.className = `pagination-btn ${currentPage === totalPages ? 'disabled' : ''}`;
            nextBtn.innerHTML = 'Próximo <i class="fas fa-chevron-right"></i>';
            nextBtn.disabled = currentPage === totalPages;
            nextBtn.addEventListener('click', () => {
                if (currentPage < totalPages) {
                    currentPage++;
                    displayFrequencies();
                }
            });
            container.appendChild(nextBtn);
        }

        // Função para mostrar todas as frequências
        function showAllFrequencies() {
            // Limpar todos os filtros
            document.getElementById('searchInput').value = '';
            document.getElementById('categoryFilter').value = 'all';
            document.getElementById('minFrequency').value = '';
            document.getElementById('maxFrequency').value = '';
            document.getElementById('evidenceFilter').value = 'all';
            
            // Aplicar filtros (que agora mostrará tudo)
            applyFilters();
            
            // Rolar para o topo dos resultados
            document.getElementById('databaseContainer').scrollIntoView({ behavior: 'smooth' });
        }

        // Função para exportar as frequências
        function exportFrequencies() {
            // Criar um blob com os dados em formato JSON
            const dataStr = JSON.stringify(allFrequencies, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            // Criar um elemento de link para download
            const exportFileDefaultName = 'frequencias_terapeuticas.json';
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        // Função para aplicar os filtros
        function applyFilters() {
            // Obter valores dos filtros
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            const categoryFilter = document.getElementById('categoryFilter').value;
            const minFrequency = parseFloat(document.getElementById('minFrequency').value) || 0;
            const maxFrequency = parseFloat(document.getElementById('maxFrequency').value) || 20000;
            const evidenceFilter = document.getElementById('evidenceFilter').value;
            
            // Se não houver termo de busca e todos os filtros estiverem em estado padrão
            const noFiltersApplied = !searchTerm && 
                                    categoryFilter === 'all' && 
                                    minFrequency === 0 && 
                                    maxFrequency === 20000 && 
                                    evidenceFilter === 'all';
            
            // Se não há filtros aplicados, retornar todas as frequências
            if (noFiltersApplied) {
                filteredFrequencies = [...allFrequencies];
            } else {
                // Caso contrário, aplicar os filtros
                filteredFrequencies = allFrequencies.filter(freq => {
                    // Filtro por termo de busca
                    const matchesSearch = !searchTerm || 
                                        freq.name.toLowerCase().includes(searchTerm) || 
                                        freq.description.toLowerCase().includes(searchTerm) ||
                                        freq.category.toLowerCase().includes(searchTerm);
                    
                    // Filtro por categoria
                    const matchesCategory = categoryFilter === 'all' || freq.category === categoryFilter;
                    
                    // Filtro por faixa de frequência
                    const matchesFrequencyRange = freq.value >= minFrequency && freq.value <= maxFrequency;
                    
                    // Filtro por nível de evidência
                    const matchesEvidence = evidenceFilter === 'all' || freq.evidence === evidenceFilter;
                    
                    return matchesSearch && matchesCategory && matchesFrequencyRange && matchesEvidence;
                });
            }
            
            // Resetar para a primeira página
            currentPage = 1;
            
            // Exibir resultados
            displayFrequencies();
        }

        // Função para exibir as frequências do CAFL
        function displayCAFLFrequencies() {
            const container = document.getElementById('caflDatabaseContainer');
            container.innerHTML = '';
            
            if (filteredCAFLFrequencies.length === 0) {
                container.innerHTML = `
                    <div class="no-results">
                        <div class="no-results-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3>Nenhum resultado encontrado</h3>
                        <p>Tente ajustar seus filtros ou termos de busca.</p>
                    </div>
                `;
                updateCAFLResultCount(0);
                return;
            }
            
            // Calcular paginação
            const startIndex = (caflCurrentPage - 1) * caflItemsPerPage;
            const endIndex = Math.min(startIndex + caflItemsPerPage, filteredCAFLFrequencies.length);
            const paginatedItems = filteredCAFLFrequencies.slice(startIndex, endIndex);
            
            // Determinar o tipo de visualização
            const isListView = document.getElementById('caflDatabaseContainer').classList.contains('list-view');
            
            // Criar o container de itens
            const itemsContainer = document.createElement('div');
            itemsContainer.className = isListView ? 'space-y-3' : 'grid grid-cols-1 md:grid-cols-2 gap-4';
            
            // Adicionar cada frequência
            paginatedItems.forEach(freq => {
                const card = createCAFLFrequencyCard(freq, isListView);
                itemsContainer.appendChild(card);
            });
            
            container.appendChild(itemsContainer);
            
            // Atualizar contadores e paginação
            updateCAFLResultCount(filteredCAFLFrequencies.length);
            updateCAFLPagination();
        }

        // Função para criar um card de frequência do CAFL
        function createCAFLFrequencyCard(freq, isListView = false) {
            const card = document.createElement('div');
            card.className = `frequency-card bg-gray-700 rounded-lg p-4 ${isListView ? '' : 'h-full'}`;
            
            const evidenceClass = freq.evidence ? `evidence-${freq.evidence}` : '';
            const evidenceText = getEvidenceText(freq.evidence);
            
            card.innerHTML = `
                <div class="${isListView ? 'flex justify-between items-center' : ''}">
                    <div class="${isListView ? 'flex-1' : ''}">
                        <h3 class="text-lg font-semibold mb-1">${freq.name}</h3>
                        <p class="text-gray-400 text-sm mb-2">${freq.description}</p>
                        <div class="flex flex-wrap gap-2 mb-3">
                            <span class="category-badge bg-green-600">${freq.category}</span>
                            ${freq.evidence ? `<span class="evidence-badge ${evidenceClass}">${evidenceText}</span>` : ''}
                        </div>
                    </div>
                    <div class="${isListView ? 'ml-4 text-right' : 'mt-3'}">
                        <div class="text-2xl font-bold text-green-400">${freq.value} Hz</div>
                        <button class="mt-2 bg-green-600 hover:bg-green-700 px-3 py-1 rounded-lg text-sm transition w-full" onclick="playFrequencyFromCard(${freq.value})">
                            <i class="fas fa-play mr-1"></i>Tocar
                        </button>
                    </div>
                </div>
            `;
            
            return card;
        }

        // Função para atualizar o contador de resultados do CAFL
        function updateCAFLResultCount(count) {
            // Como não temos um elemento específico para o contador do CAFL, vamos criar um
            let resultCount = document.getElementById('caflResultCount');
            if (!resultCount) {
                resultCount = document.createElement('div');
                resultCount.id = 'caflResultCount';
                resultCount.className = 'text-sm text-gray-400';
                document.querySelector('#databaseSection .flex.justify-between.items-center').appendChild(resultCount);
            }
            resultCount.textContent = `${count} resultados`;
        }

        // Função para atualizar a paginação do CAFL
        function updateCAFLPagination() {
            const container = document.getElementById('caflPaginationContainer');
            container.innerHTML = '';
            
            const totalPages = Math.ceil(filteredCAFLFrequencies.length / caflItemsPerPage);
            
            if (totalPages <= 1) {
                container.style.display = 'none';
                return;
            }
            
            container.style.display = 'flex';
            
            // Botão "Anterior"
            const prevBtn = document.createElement('button');
            prevBtn.className = `pagination-btn ${caflCurrentPage === 1 ? 'disabled' : ''}`;
            prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i> Anterior';
            prevBtn.disabled = caflCurrentPage === 1;
            prevBtn.addEventListener('click', () => {
                if (caflCurrentPage > 1) {
                    caflCurrentPage--;
                    displayCAFLFrequencies();
                }
            });
            container.appendChild(prevBtn);
            
            // Informação da página
            const pageInfo = document.createElement('div');
            pageInfo.className = 'pagination-info';
            pageInfo.textContent = `Página ${caflCurrentPage} de ${totalPages} (${filteredCAFLFrequencies.length} resultados)`;
            container.appendChild(pageInfo);
            
            // Botão "Próximo"
            const nextBtn = document.createElement('button');
            nextBtn.className = `pagination-btn ${caflCurrentPage === totalPages ? 'disabled' : ''}`;
            nextBtn.innerHTML = 'Próximo <i class="fas fa-chevron-right"></i>';
            nextBtn.disabled = caflCurrentPage === totalPages;
            nextBtn.addEventListener('click', () => {
                if (caflCurrentPage < totalPages) {
                    caflCurrentPage++;
                    displayCAFLFrequencies();
                }
            });
            container.appendChild(nextBtn);
        }

        // Função para mostrar todas as frequências do CAFL
        function showAllCAFLFrequencies() {
            // Limpar todos os filtros
            document.getElementById('caflSearchInput').value = '';
            document.getElementById('caflCategoryFilter').value = 'all';
            
            // Aplicar filtros (que agora mostrará tudo)
            applyCAFLFilters();
            
            // Rolar para o topo dos resultados
            document.getElementById('caflDatabaseContainer').scrollIntoView({ behavior: 'smooth' });
        }

        // Função para exportar as frequências do CAFL
        function exportCAFLFrequencies() {
            // Criar um blob com os dados em formato JSON
            const dataStr = JSON.stringify(allCAFLFrequencies, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            // Criar um elemento de link para download
            const exportFileDefaultName = 'banco_de_dados_cafl.json';
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        // Função para aplicar os filtros do CAFL
        function applyCAFLFilters() {
            // Obter valores dos filtros
            const searchTerm = document.getElementById('caflSearchInput').value.toLowerCase().trim();
            const categoryFilter = document.getElementById('caflCategoryFilter').value;
            
            // Se não houver termo de busca e todos os filtros estiverem em estado padrão
            const noFiltersApplied = !searchTerm && categoryFilter === 'all';
            
            // Se não há filtros aplicados, retornar todas as frequências
            if (noFiltersApplied) {
                filteredCAFLFrequencies = [...allCAFLFrequencies];
            } else {
                // Caso contrário, aplicar os filtros
                filteredCAFLFrequencies = allCAFLFrequencies.filter(freq => {
                    // Filtro por termo de busca
                    const matchesSearch = !searchTerm || 
                                        freq.name.toLowerCase().includes(searchTerm) || 
                                        freq.description.toLowerCase().includes(searchTerm) ||
                                        freq.category.toLowerCase().includes(searchTerm);
                    
                    // Filtro por categoria
                    const matchesCategory = categoryFilter === 'all' || freq.category === categoryFilter;
                    
                    return matchesSearch && matchesCategory;
                });
            }
            
            // Resetar para a primeira página
            caflCurrentPage = 1;
            
            // Exibir resultados
            displayCAFLFrequencies();
        }

        // Função para tocar uma frequência
        function playFrequency() {
            if (isPlaying) {
                stopFrequency();
                return;
            }
            
            const frequency = parseFloat(document.getElementById('frequency').value);
            
            if (isNaN(frequency) || frequency < 20 || frequency > 20000) {
                alert('Por favor, insira uma frequência válida entre 20 Hz e 20.000 Hz.');
                return;
            }
            
            try {
                // Criar um novo oscilador
                oscillator = audioContext.createOscillator();
                gainNode = audioContext.createGain();
                analyser = audioContext.createAnalyser();
                
                // Conectar os nós
                oscillator.connect(gainNode);
                gainNode.connect(analyser);
                analyser.connect(audioContext.destination);
                
                // Configurar o oscilador
                oscillator.type = currentWaveType;
                oscillator.frequency.value = frequency;
                gainNode.gain.value = document.getElementById('volume').value / 100;
                
                // Configurar o analisador
                analyser.fftSize = 2048;
                
                // Iniciar o oscilador
                oscillator.start();
                
                // Atualizar o estado
                isPlaying = true;
                document.getElementById('playBtn').classList.add('hidden');
                document.getElementById('stopBtn').classList.remove('hidden');
                
                // Iniciar a visualização da onda
                visualizeWave();
                
                // Adicionar ao histórico
                addToHistory(frequency);
                
                // Atualizar informações da frequência atual
                updateCurrentFrequencyInfo();
            } catch (e) {
                console.error('Erro ao tocar a frequência:', e);
                alert('Ocorreu um erro ao tentar reproduzir a frequência.');
            }
        }

        // Função para tocar uma frequência a partir de um card
        function playFrequencyFromCard(frequency) {
            document.getElementById('frequency').value = frequency;
            playFrequency();
        }

        // Função para parar a reprodução
        function stopFrequency() {
            if (oscillator) {
                oscillator.stop();
                oscillator = null;
            }
            
            isPlaying = false;
            document.getElementById('playBtn').classList.remove('hidden');
            document.getElementById('stopBtn').classList.add('hidden');
            
            // Parar a visualização
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
            
            // Limpar o canvas
            const canvas = document.getElementById('waveCanvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        // Função para visualizar a onda
        function visualizeWave() {
            const canvas = document.getElementById('waveCanvas');
            const ctx = canvas.getContext('2d');
            const bufferLength = analyser.frequencyBinCount;
            const dataArray = new Uint8Array(bufferLength);
            
            function draw() {
                animationId = requestAnimationFrame(draw);
                
                analyser.getByteTimeDomainData(dataArray);
                
                ctx.fillStyle = 'rgba(15, 23, 42, 0.1)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.lineWidth = 2;
                ctx.strokeStyle = '#3b82f6';
                ctx.beginPath();
                
                const sliceWidth = canvas.width / bufferLength;
                let x = 0;
                
                for (let i = 0; i < bufferLength; i++) {
                    const v = dataArray[i] / 128.0;
                    const y = v * canvas.height / 2;
                    
                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                    
                    x += sliceWidth;
                }
                
                ctx.lineTo(canvas.width, canvas.height / 2);
                ctx.stroke();
            }
            
            draw();
        }

        // Função para configurar o timer
        function setupTimer() {
            const minutes = prompt('Digite o tempo em minutos:', '5');
            
            if (minutes === null || minutes === '') {
                return;
            }
            
            const mins = parseInt(minutes);
            
            if (isNaN(mins) || mins <= 0) {
                alert('Por favor, insira um valor válido em minutos.');
                return;
            }
            
            // Configurar o timer
            timerDuration = mins * 60;
            timerSeconds = 0;
            
            // Exibir o container do timer
            document.getElementById('timerContainer').classList.remove('hidden');
            
            // Iniciar o timer
            startTimer();
        }

        // Função para iniciar o timer
        function startTimer() {
            // Limpar qualquer timer existente
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            // Atualizar o display
            updateTimerDisplay();
            
            // Iniciar o intervalo
            timerInterval = setInterval(() => {
                timerSeconds++;
                
                // Atualizar o display
                updateTimerDisplay();
                
                // Verificar se o timer terminou
                if (timerSeconds >= timerDuration) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                    
                    // Parar a reprodução
                    if (isPlaying) {
                        stopFrequency();
                    }
                    
                    // Notificar o usuário
                    alert('O timer foi concluído!');
                    
                    // Esconder o container do timer
                    document.getElementById('timerContainer').classList.add('hidden');
                }
            }, 1000);
        }

        // Função para atualizar o display do timer
        function updateTimerDisplay() {
            const hours = Math.floor(timerSeconds / 3600);
            const minutes = Math.floor((timerSeconds % 3600) / 60);
            const seconds = timerSeconds % 60;
            
            const display = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timerDisplay').textContent = display;
            
            // Atualizar a barra de progresso
            const progress = (timerSeconds / timerDuration) * 100;
            document.getElementById('timerProgress').style.width = `${progress}%`;
        }

        // Função para alternar favoritos
        function toggleFavorite() {
            const frequency = parseFloat(document.getElementById('frequency').value);
            const name = document.getElementById('currentInfo').querySelector('.text-xl').textContent;
            
            // Obter favoritos do localStorage
            let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
            
            // Verificar se já é favorito
            const index = favorites.findIndex(fav => fav.value === frequency);
            
            if (index !== -1) {
                // Remover dos favoritos
                favorites.splice(index, 1);
                document.getElementById('favoriteBtn').innerHTML = '<i class="far fa-star mr-2"></i>Adicionar aos Favoritos';
            } else {
                // Adicionar aos favoritos
                favorites.push({
                    value: frequency,
                    name: name,
                    timestamp: new Date().toISOString()
                });
                document.getElementById('favoriteBtn').innerHTML = '<i class="fas fa-star mr-2"></i>Remover dos Favoritos';
            }
            
            // Salvar no localStorage
            localStorage.setItem('favorites', JSON.stringify(favorites));
        }

        // Função para adicionar ao histórico
        function addToHistory(frequency) {
            // Obter histórico do localStorage
            let history = JSON.parse(localStorage.getItem('history') || '[]');
            
            // Adicionar ao início do histórico
            history.unshift({
                value: frequency,
                timestamp: new Date().toISOString()
            });
            
            // Limitar a 10 itens
            if (history.length > 10) {
                history = history.slice(0, 10);
            }
            
            // Salvar no localStorage
            localStorage.setItem('history', JSON.stringify(history));
            
            // Atualizar a exibição do histórico
            updateHistoryDisplay();
        }

        // Função para atualizar a exibição do histórico
        function updateHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '';
            
            // Obter histórico do localStorage
            const history = JSON.parse(localStorage.getItem('history') || '[]');
            
            if (history.length === 0) {
                historyList.innerHTML = '<p class="text-gray-500 text-sm">Nenhum histórico recente.</p>';
                return;
            }
            
            // Adicionar cada item do histórico
            history.forEach(item => {
                const date = new Date(item.timestamp);
                const formattedDate = date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                
                const historyItem = document.createElement('div');
                historyItem.className = 'flex justify-between items-center py-1 px-2 rounded hover:bg-gray-700 cursor-pointer';
                historyItem.innerHTML = `
                    <span class="text-blue-400 font-medium">${item.value} Hz</span>
                    <span class="text-xs text-gray-500">${formattedDate}</span>
                `;
                
                historyItem.addEventListener('click', () => {
                    document.getElementById('frequency').value = item.value;
                    playFrequency();
                });
                
                historyList.appendChild(historyItem);
            });
        }

        // Função para atualizar as informações da frequência atual
        function updateCurrentFrequencyInfo() {
            const frequency = parseFloat(document.getElementById('frequency').value);
            
            if (isNaN(frequency)) {
                return;
            }
            
            // Buscar informações da frequência no banco de dados
            const freqInfo = allFrequencies.find(f => f.value === frequency);
            
            if (freqInfo) {
                document.getElementById('currentInfo').innerHTML = `
                    <div class="text-xl font-bold text-blue-400">${freqInfo.value} Hz</div>
                    <div class="text-lg font-medium">${freqInfo.name}</div>
                `;
                
                document.getElementById('currentDetails').innerHTML = `
                    <div><strong>Categoria:</strong> <span class="category-badge bg-blue-600">${freqInfo.category}</span></div>
                    <div><strong>Descrição:</strong> ${freqInfo.description}</div>
                `;
                
                // Recomendação de onda baseada na categoria
                let waveRecommendation = '';
                switch(freqInfo.category) {
                    case 'Concentração':
                        waveRecommendation = 'Senoidal - Proporciona uma experiência mais suave e agradável para estimulação cognitiva.';
                        break;
                    case 'Relaxamento':
                        waveRecommendation = 'Senoidal - Ideal para induzir estados de relaxamento profundo.';
                        break;
                    case 'Energia':
                        waveRecommendation = 'Quadrada - Mais eficaz para estimulação energética.';
                        break;
                    case 'Sono':
                        waveRecommendation = 'Senoidal - Mais suave para não interromper o processo de adormecimento.';
                        break;
                    case 'Dor':
                        waveRecommendation = 'Dente de Serra - Frequências mais complexas podem ser mais eficazes para alívio da dor.';
                        break;
                    case 'Cura':
                        waveRecommendation = 'Triangular - Proporciona um equilíbrio entre suavidade e eficácia.';
                        break;
                    default:
                        waveRecommendation = 'Senoidal - Tipo de onda mais versátil e agradável.';
                }
                
                document.getElementById('waveRecommendation').innerHTML = `
                    <div class="flex items-center gap-2">
                        <i class="fas fa-lightbulb text-yellow-500"></i>
                        <span><strong>Onda recomendada:</strong> ${waveRecommendation}</span>
                    </div>
                `;
                
                // Verificar se é favorito
                const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
                const isFavorite = favorites.some(fav => fav.value === frequency);
                
                if (isFavorite) {
                    document.getElementById('favoriteBtn').innerHTML = '<i class="fas fa-star mr-2"></i>Remover dos Favoritos';
                } else {
                    document.getElementById('favoriteBtn').innerHTML = '<i class="far fa-star mr-2"></i>Adicionar aos Favoritos';
                }
            } else {
                document.getElementById('currentInfo').innerHTML = `
                    <div class="text-xl font-bold text-blue-400">${frequency} Hz</div>
                    <div class="text-lg font-medium">Frequência Personalizada</div>
                `;
                
                document.getElementById('currentDetails').innerHTML = `
                    <div><strong>Categoria:</strong> <span class="category-badge bg-purple-600">Personalizada</span></div>
                    <div><strong>Descrição:</strong> Frequência definida pelo usuário.</div>
                `;
                
                document.getElementById('waveRecommendation').innerHTML = `
                    <div class="flex items-center gap-2">
                        <i class="fas fa-lightbulb text-yellow-500"></i>
                        <span><strong>Onda recomendada:</strong> Senoidal - Tipo de onda mais versátil e agradável.</span>
                    </div>
                `;
                
                // Verificar se é favorito
                const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
                const isFavorite = favorites.some(fav => fav.value === frequency);
                
                if (isFavorite) {
                    document.getElementById('favoriteBtn').innerHTML = '<i class="fas fa-star mr-2"></i>Remover dos Favoritos';
                } else {
                    document.getElementById('favoriteBtn').innerHTML = '<i class="far fa-star mr-2"></i>Adicionar aos Favoritos';
                }
            }
        }

        // Função para mostrar uma seção
        function showSection(section) {
            // Esconder todas as seções
            document.querySelectorAll('.db-section').forEach(sec => {
                sec.classList.remove('active');
            });
            
            // Remover a classe ativa de todos os botões de aba
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Mostrar a seção selecionada
            document.getElementById(`${section}Section`).classList.add('active');
            
            // Adicionar a classe ativa ao botão correspondente
            document.getElementById(`${section}Tab`).classList.add('active');
            
            // Se for a seção do banco de dados, atualizar a exibição
            if (section === 'database') {
                displayCAFLFrequencies();
            }
        }

        // Função para verificar se o modal de headphones deve ser exibido
        function checkHeadphoneModal() {
            const dontShow = localStorage.getItem('dontShowHeadphoneModal') === 'true';
            
            if (!dontShow) {
                document.getElementById('headphoneModal').style.display = 'flex';
            }
        }

        // Função para fechar o modal de headphones
        function closeHeadphoneModal() {
            document.getElementById('headphoneModal').style.display = 'none';
        }

        // Função para configurar o botão voltar ao topo
        function setupScrollToTop() {
            const topBtn = document.getElementById('topBtn');
            
            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    topBtn.classList.add('show');
                } else {
                    topBtn.classList.remove('show');
                }
            });
            
            topBtn.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        }

        // Função debounce para limitar a frequência de chamadas
        function debounce(func, wait) {
            let timeout;
            return function() {
                const context = this;
                const args = arguments;
                clearTimeout(timeout);
                timeout = setTimeout(() => {
                    func.apply(context, args);
                }, wait);
            };
        }

        // Funções de protocolo (implementação básica)
        function startProtocol(protocolId) {
            // Implementação básica - em um cenário real, isso seria mais complexo
            protocolActive = true;
            currentProtocol = protocolId;
            currentStepIndex = 0;
            
            // Mostrar os controles do protocolo
            document.getElementById('protocolControls').classList.remove('hidden');
            
            // Atualizar o nome do protocolo
            document.getElementById('protocolName').textContent = `Protocolo ${protocolId}`;
            
            // Atualizar a interface do protocolo
            updateProtocolUI();
        }

        function exitProtocol() {
            protocolActive = false;
            currentProtocol = null;
            currentStepIndex = 0;
            
            // Esconder os controles do protocolo
            document.getElementById('protocolControls').classList.add('hidden');
            
            // Parar a reprodução se estiver ativa
            if (isPlaying) {
                stopFrequency();
            }
        }

        function prevProtocolStep() {
            if (currentStepIndex > 0) {
                currentStepIndex--;
                updateProtocolUI();
            }
        }

        function nextProtocolStep() {
            // Implementação básica - em um cenário real, isso avançaria para o próximo passo
            currentStepIndex++;
            updateProtocolUI();
        }

        function updateProtocolUI() {
            // Implementação básica - em um cenário real, isso atualizaria a interface com base no protocolo atual
            document.getElementById('currentStepName').textContent = `Passo ${currentStepIndex + 1}`;
            document.getElementById('protocolProgressText').textContent = `${currentStepIndex + 1}/5`;
            
            // Atualizar a barra de progresso
            const progress = ((currentStepIndex + 1) / 5) * 100;
            document.getElementById('protocolProgressBar').style.width = `${progress}%`;
            
            // Atualizar os botões de navegação
            document.getElementById('prevStepBtn').disabled = currentStepIndex === 0;
            document.getElementById('nextStepBtn').disabled = currentStepIndex >= 4;
            
            // Atualizar os indicadores de passo
            const stepIndicators = document.getElementById('stepIndicators');
            stepIndicators.innerHTML = '';
            
            for (let i = 0; i < 5; i++) {
                const indicator = document.createElement('button');
                indicator.className = `w-8 h-8 rounded-full ${i === currentStepIndex ? 'bg-purple-600' : 'bg-gray-700'}`;
                indicator.textContent = i + 1;
                indicator.addEventListener('click', () => {
                    currentStepIndex = i;
                    updateProtocolUI();
                });
                stepIndicators.appendChild(indicator);
            }
        }
    </script>
</body>
</html>
