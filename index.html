<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Harmonizador Fernandes v1.5 - Frequências Terapêuticas & Protocolos Personalizados">
    <title>Harmonizador Fernandes - Versão com Banco de Dados</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Chart.js para visualizações -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Estilos customizados -->
    <style>
        /* Variáveis CSS para facilitar manutenção */
        :root {
            --primary-color: #3b82f6;
            --secondary-color: #8b5cf6;
            --accent-color: #f59e0b;
            --success-color: #10b981;
            --warning-color: #fbbf24;
            --danger-color: #ef4444;
            --dark-bg: #1e293b;
            --darker-bg: #0f172a;
            --card-bg: #1f2937;
            --text-primary: #ffffff;
            --text-secondary: #9ca3af;
        }

        /* Animações */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        /* Estilos do canvas */
        #waveCanvas {
            background: linear-gradient(to bottom, var(--dark-bg), var(--darker-bg));
        }

        /* Cards de frequência */
        .frequency-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .frequency-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            background-color: rgba(59, 130, 246, 0.1);
        }

        .frequency-card.selected {
            background-color: rgba(59, 130, 246, 0.2);
            border: 2px solid var(--primary-color);
        }

        /* Badge de categoria */
        .category-badge {
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
        }

        /* Badge de evidência científica */
        .evidence-badge {
            font-size: 0.7rem;
            padding: 0.2rem 0.6rem;
            border-radius: 4px;
            font-weight: bold;
            margin-left: 0.5rem;
        }

        .evidence-high {
            background-color: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }

        .evidence-medium {
            background-color: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }

        .evidence-low {
            background-color: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        /* Destaque de busca */
        .search-highlight {
            background-color: rgba(59, 130, 246, 0.3);
            padding: 0 2px;
            border-radius: 2px;
        }

        /* Passos de protocolo */
        .protocol-step {
            position: relative;
            padding-left: 2rem;
        }

        .protocol-step::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0.5rem;
            width: 1rem;
            height: 1rem;
            border-radius: 50%;
        }

        .protocol-step.energy::before { background: var(--accent-color); }
        .protocol-step.focus::before { background: var(--primary-color); }
        .protocol-step.anti-inflammatory::before { background: var(--success-color); }
        .protocol-step.harmony::before { background: var(--secondary-color); }

        /* Título estilizado */
        .harmonizador-title {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Container do banco de dados */
        .database-container {
            height: 600px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) var(--card-bg);
        }

        .database-container::-webkit-scrollbar {
            width: 8px;
        }

        .database-container::-webkit-scrollbar-track {
            background: var(--card-bg);
        }

        .database-container::-webkit-scrollbar-thumb {
            background-color: var(--primary-color);
            border-radius: 4px;
        }

        /* Container do Top 10 */
        .top10-container {
            max-height: 500px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) var(--card-bg);
        }

        .top10-container::-webkit-scrollbar {
            width: 8px;
        }

        .top10-container::-webkit-scrollbar-track {
            background: var(--card-bg);
        }

        .top10-container::-webkit-scrollbar-thumb {
            background-color: var(--primary-color);
            border-radius: 4px;
        }

        /* Estilos do timer */
        .timer-display {
            font-family: 'Courier New', Courier, monospace;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .timer-progress {
            transition: width 1s linear;
        }

        /* Botão voltar ao topo */
        #topBtn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        #topBtn.show {
            opacity: 1;
            visibility: visible;
        }

        #topBtn:hover {
            transform: translateY(-3px);
        }

        /* Destaque de protocolo */
        .protocol-highlight {
            animation: pulse 2s infinite;
        }

        /* Eficiência alta */
        .efficiency-high {
            color: var(--warning-color);
        }

        /* Itens de referência */
        .reference-item {
            position: relative;
            padding-left: 2rem;
        }

        .reference-item::before {
            content: '•';
            position: absolute;
            left: 0;
            top: 0;
        }

        /* Eficiência da onda */
        .wave-efficiency {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Input do timer */
        .timer-input {
            width: 3rem;
            text-align: center;
        }

        /* Melhorias de acessibilidade */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Melhorias de foco para acessibilidade */
        button:focus,
        input:focus,
        select:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

        /* Melhorias para modo de alto contraste */
        @media (prefers-contrast: high) {
            .frequency-card:hover,
            .frequency-card.selected {
                border-width: 3px;
            }
        }

        /* Melhorias para redução de movimento */
        @media (prefers-reduced-motion: reduce) {
            .frequency-card,
            #topBtn,
            .timer-progress,
            .protocol-highlight {
                transition: none;
                animation: none;
            }
        }

        /* Container de referências com rolagem */
        .references-container {
            max-height: 400px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) var(--card-bg);
        }

        .references-container::-webkit-scrollbar {
            width: 8px;
        }

        .references-container::-webkit-scrollbar-track {
            background: var(--card-bg);
        }

        .references-container::-webkit-scrollbar-thumb {
            background-color: var(--primary-color);
            border-radius: 4px;
        }

        /* Layout do Visualizador de Onda ao lado da Frequência */
        .frequency-input-group {
            display: flex;
            gap: 1rem;
            align-items: flex-end;
        }

        .frequency-controls {
            flex: 1;
        }

        .wave-visualizer-small {
            width: 120px;
            height: 80px;
            flex-shrink: 0;
        }

        /* Responsividade para telas pequenas */
        @media (max-width: 768px) {
            .frequency-input-group {
                flex-direction: column;
                align-items: stretch;
            }

            .wave-visualizer-small {
                width: 100%;
                height: 100px;
                margin-top: 1rem;
            }
        }
        
        /* Destaque para áreas editáveis */
        .editable-area {
            border: 2px dashed var(--warning-color);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            position: relative;
        }
        
        .editable-label {
            position: absolute;
            top: -12px;
            left: 15px;
            background: var(--dark-bg);
            padding: 0 8px;
            font-size: 12px;
            color: var(--warning-color);
            font-weight: bold;
        }
        
        /* Modal de informações sobre headphones */
        .headphone-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            animation: slideIn 0.5s ease;
        }
        
        .headphone-content {
            background: linear-gradient(135deg, #1e293b, #334155);
            border-radius: 16px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            border: 2px solid var(--primary-color);
            position: relative;
        }
        
        .headphone-icon {
            font-size: 4rem;
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 1rem;
        }
        
        .headphone-title {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }
        
        .headphone-text {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }
        
        .headphone-benefits {
            background: rgba(59, 130, 246, 0.1);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .headphone-benefits h4 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        .headphone-benefits ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .headphone-benefits li {
            padding: 0.25rem 0;
            padding-left: 1.5rem;
            position: relative;
        }
        
        .headphone-benefits li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: var(--success-color);
            font-weight: bold;
        }
        
        .headphone-close {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            display: block;
            margin: 0 auto;
            transition: background 0.3s ease;
        }
        
        .headphone-close:hover {
            background: var(--secondary-color);
        }
        
        .dont-show-again {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 1rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        
        .dont-show-again input {
            margin-right: 0.5rem;
        }
        
        /* Cards de benefícios */
        .benefit-card {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--primary-color);
        }
        
        .benefit-card h4 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .benefit-card p {
            color: var(--text-secondary);
            font-size: 0.875rem;
            line-height: 1.5;
        }
        
        /* Seção Hero no topo */
        .hero-section {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.9), rgba(15, 23, 42, 0.9)), 
                        url('https://images.unsplash.com/photo-1648080473344-a399955ac123?q=80&w=1974&auto=format&fit=crop') center/cover;
            border-radius: 16px;
            padding: 3rem 2rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 70% 30%, rgba(59, 130, 246, 0.2) 0%, transparent 50%);
            z-index: 0;
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .hero-title {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .hero-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            max-width: 700px;
            margin-bottom: 2rem;
        }
        
        .hero-features {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .hero-feature {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            width: 180px;
            animation: float 3s ease-in-out infinite;
        }
        
        .hero-feature:nth-child(2) {
            animation-delay: 0.5s;
        }
        
        .hero-feature:nth-child(3) {
            animation-delay: 1s;
        }
        
        .hero-feature:nth-child(4) {
            animation-delay: 1.5s;
        }
        
        .hero-feature-icon {
            font-size: 2.5rem;
            margin-bottom: 0.75rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .hero-feature-title {
            font-weight: bold;
            margin-bottom: 0.25rem;
            color: var(--text-primary);
        }
        
        .hero-feature-text {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        
        .hero-cta {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
        }
        
        .hero-cta:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.6);
        }
        
        /* Responsividade para a seção hero */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2rem;
            }
            
            .hero-subtitle {
                font-size: 1rem;
            }
            
            .hero-features {
                gap: 1.5rem;
            }
            
            .hero-feature {
                width: 150px;
            }
            
            .hero-feature-icon {
                font-size: 2rem;
            }
        }
        
        /* Cabeçalho com imagem de fundo */
        .header-with-bg {
            background: linear-gradient(to right, rgba(15, 23, 42, 0.85), rgba(30, 41, 59, 0.85)), 
                        url('https://images.unsplash.com/photo-1518709268805-4e9042af2176?q=80&w=2070&auto=format&fit=crop') center/cover;
            position: relative;
            overflow: hidden;
        }
        
        .header-with-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 50%, rgba(59, 130, 246, 0.15) 0%, transparent 70%);
            z-index: 0;
        }
        
        .header-content {
            position: relative;
            z-index: 1;
        }
        
        /* Efeito de brilho no título */
        .title-glow {
            text-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
        }

        /* Filtros avançados */
        .filter-section {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .filter-group {
            margin-bottom: 1rem;
        }

        .filter-label {
            display: block;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .range-slider-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .range-slider {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: rgba(59, 130, 246, 0.2);
            outline: none;
            -webkit-appearance: none;
        }

        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
        }

        .range-value {
            min-width: 80px;
            text-align: center;
            font-weight: 500;
            color: var(--primary-color);
        }

        /* Paginação */
        .pagination-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .pagination-btn {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: var(--text-primary);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .pagination-btn:hover:not(:disabled) {
            background: rgba(59, 130, 246, 0.3);
        }

        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination-info {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* Modal de detalhes */
        .detail-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            overflow-y: auto;
            padding: 2rem;
        }

        .detail-content {
            background: linear-gradient(135deg, #1e293b, #334155);
            border-radius: 16px;
            padding: 2rem;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            border: 2px solid var(--primary-color);
            position: relative;
        }

        .detail-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--danger-color);
            color: white;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.3s ease;
        }

        .detail-close:hover {
            background: #dc2626;
        }

        .detail-header {
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(59, 130, 246, 0.2);
        }

        .detail-title {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .detail-subtitle {
            font-size: 1.2rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .detail-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid rgba(59, 130, 246, 0.2);
        }

        .detail-tab {
            padding: 0.75rem 1.5rem;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .detail-tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .detail-tab:hover {
            color: var(--text-primary);
        }

        .detail-tab-content {
            display: none;
        }

        .detail-tab-content.active {
            display: block;
        }

        .detail-section {
            margin-bottom: 1.5rem;
        }

        .detail-section-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .evidence-item {
            background: rgba(59, 130, 246, 0.05);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 3px solid var(--primary-color);
        }

        .evidence-study {
            font-weight: 600;
            color: var(--text-primary);
        }

        .evidence-year {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .evidence-description {
            margin-top: 0.5rem;
            color: var(--text-secondary);
        }

        .protocol-item {
            background: rgba(139, 92, 246, 0.05);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 3px solid var(--secondary-color);
        }

        .protocol-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .protocol-details {
            display: flex;
            gap: 1rem;
            margin-top: 0.5rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .safety-item {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .safety-icon {
            color: var(--warning-color);
            margin-top: 0.1rem;
        }

        .synergy-tag {
            display: inline-block;
            background: rgba(59, 130, 246, 0.2);
            color: var(--primary-color);
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }

        /* Loading spinner */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* No results message */
        .no-results {
            text-align: center;
            padding: 3rem;
            color: var(--text-secondary);
        }

        .no-results-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        /* Estilos específicos para o banco de dados */
        .db-section {
            display: none;
        }
        
        .db-section.active {
            display: block;
        }
        
        .tab-navigation {
            border-bottom: 1px solid rgba(59, 130, 246, 0.3);
            margin-bottom: 1.5rem;
        }
        
        .tab-btn {
            padding: 0.75rem 1.5rem;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
            font-weight: 500;
        }
        
        .tab-btn.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }
        
        .tab-btn:hover {
            color: var(--text-primary);
        }
        
        /* Loading spinner para o banco de dados */
        .db-loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
        }
        
        .db-loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top: 4px solid var(--primary-color);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        /* Notificação */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary-color);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            animation: slideIn 0.3s ease;
        }

        .notification.success {
            background: var(--success-color);
        }

        .notification.error {
            background: var(--danger-color);
        }

        .notification.warning {
            background: var(--warning-color);
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <!-- Modal de informações sobre headphones -->
    <div id="headphoneModal" class="headphone-modal">
        <div class="headphone-content">
            <div class="headphone-icon">
                <i class="fas fa-headphones"></i>
            </div>
            <h2 class="headphone-title">Importante: Use Headphones!</h2>
            <p class="headphone-text">
                Para uma experiência completa e eficaz com as frequências terapêuticas, recomendamos fortemente o uso de headphones de boa qualidade.
            </p>
            
            <div class="headphone-benefits">
                <h4>Benefícios do uso de headphones:</h4>
                <ul>
                    <li>Estimulação binaural precisa</li>
                    <li>Isolamento de ruídos externos</li>
                    <li>Experiência imersiva completa</li>
                    <li>Melhor foco e concentração</li>
                    <li>Resultados otimizados</li>
                </ul>
            </div>
            
            <p class="headphone-text">
                As frequências terapêuticas funcionam melhor quando entregues diretamente aos ouvidos, permitindo que o cérebro processe os estímulos de forma mais eficiente.
            </p>
            
            <button id="closeHeadphoneModal" class="headphone-close">Entendi</button>
            
            <div class="dont-show-again">
                <input type="checkbox" id="dontShowAgain">
                <label for="dontShowAgain">Não mostrar novamente</label>
            </div>
        </div>
    </div>

    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- Cabeçalho com imagem de fundo -->
        <header class="header-with-bg p-8 shadow-2xl rounded-b-2xl" role="banner">
            <div class="header-content container mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
                <div>
                    <h1 class="text-4xl md:text-5xl font-bold harmonizador-title title-glow">Harmonizador Fernandes</h1>
                    <p class="text-blue-200 mt-2 text-lg">Frequências Terapêuticas & Protocolos Personalizados</p>
                </div>
                <div class="flex items-center space-x-4">
                    <!-- hitwebcounter Code START -->
                    <a href="https://www.hitwebcounter.com" target="_blank">
                        <img src="https://hitwebcounter.com/counter/counter.php?page=21436820&style=0006&nbdigits=6&type=ip&initCount=0" title="Conversions and Hits" alt="Conversions and Hits" border="0" />
                    </a>
                    <!-- hitwebcounter Code END -->
                </div>
            </div>
        </header>

        <!-- Seção Hero -->
        <section class="hero-section">
            <div class="hero-content">
                <h2 class="hero-title">Equilibre Sua Energia Vital</h2>
                <p class="hero-subtitle">
                    Descubra o poder das frequências terapêuticas para transformar seu bem-estar físico, mental e emocional com protocolos personalizados e cientificamente desenvolvidos.
                </p>
                
                <div class="hero-features">
                    <div class="hero-feature">
                        <div class="hero-feature-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h3 class="hero-feature-title">Foco & Clareza</h3>
                        <p class="hero-feature-text">Aumente sua concentração e capacidade cognitiva</p>
                    </div>
                    
                    <div class="hero-feature">
                        <div class="hero-feature-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <h3 class="hero-feature-title">Energia Vital</h3>
                        <p class="hero-feature-text">Combata a fadiga e recupere sua vitalidade</p>
                    </div>
                    
                    <div class="hero-feature">
                        <div class="hero-feature-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h3 class="hero-feature-title">Equilíbrio Emocional</h3>
                        <p class="hero-feature-text">Encontre paz interior e bem-estar</p>
                    </div>
                    
                    <div class="hero-feature">
                        <div class="hero-feature-icon">
                            <i class="fas fa-moon"></i>
                        </div>
                        <h3 class="hero-feature-title">Sono Reparador</h3>
                        <p class="hero-feature-text">Melhore a qualidade do seu descanso</p>
                    </div>
                </div>
                
                <button class="hero-cta" onclick="document.getElementById('generatorSection').scrollIntoView({behavior: 'smooth'})">
                    Começar Agora <i class="fas fa-arrow-down ml-2"></i>
                </button>
            </div>
        </section>

        <!-- Navegação por Abas -->
        <div class="tab-navigation mb-8">
            <div class="flex space-x-1">
                <button id="generatorTab" class="tab-btn active" onclick="showSection('generator')">
                    <i class="fas fa-wave-square mr-2"></i>Gerador de Frequências
                </button>
                <button id="databaseTab" class="tab-btn" onclick="showSection('database')">
                    <i class="fas fa-database mr-2"></i>Banco de Dados CAFL
                </button>
            </div>
        </div>

        <!-- Conteúdo Principal -->
        <main>
            <!-- Seção do Gerador de Frequências -->
            <section id="generatorSection" class="db-section active">
                <div class="grid lg:grid-cols-12 gap-8">
                    <!-- Coluna 1: Gerador de Frequências + Histórico -->
                    <div class="lg:col-span-5 space-y-6">
                        <section id="generatorSection" class="bg-gray-800 rounded-xl p-6 shadow-2xl">
                            <h2 class="text-2xl font-semibold mb-6 text-blue-400" id="generator-heading"><i class="fas fa-wave-square mr-2" aria-hidden="true"></i>Gerador de Frequências</h2>

                            <!-- Protocol Controls (inicialmente oculto) -->
                            <div id="protocolControls" class="protocol-controls hidden mb-6 p-4 bg-gray-900 rounded-lg">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg font-semibold text-purple-400"><i class="fas fa-tasks mr-2" aria-hidden="true"></i><span id="protocolName">Protocolo Ativo</span></h3>
                                    <button id="exitProtocolBtn" class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded-lg text-sm transition" aria-label="Sair do protocolo">
                                        <i class="fas fa-times mr-1" aria-hidden="true"></i>Sair
                                    </button>
                                </div>
                                <!-- Progress Bar -->
                                <div class="mb-4">
                                    <div class="flex justify-between text-sm mb-1">
                                        <span>Progresso do Protocolo</span>
                                        <span id="protocolProgressText">0/0</span>
                                    </div>
                                    <div class="w-full bg-gray-700 rounded-full h-2.5" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                                        <div id="protocolProgressBar" class="bg-purple-600 h-2.5 rounded-full transition-all duration-300" style="width: 0%"></div>
                                    </div>
                                </div>
                                <!-- Step Indicators -->
                                <div id="stepIndicators" class="flex flex-wrap gap-2 mb-4" role="tablist">
                                    <!-- Indicadores serão adicionados dinamicamente -->
                                </div>
                                <!-- Step Navigation -->
                                <div class="flex justify-between">
                                    <button id="prevStepBtn" class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed" aria-label="Passo anterior">
                                        <i class="fas fa-chevron-left mr-2" aria-hidden="true"></i>Anterior
                                    </button>
                                    <div class="text-center">
                                        <div class="text-sm text-gray-400">Passo Atual</div>
                                        <div id="currentStepName" class="font-medium">-</div>
                                    </div>
                                    <button id="nextStepBtn" class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed" aria-label="Próximo passo">
                                        Próximo<i class="fas fa-chevron-right ml-2" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </div>

                            <div class="space-y-4">
                                <!-- Frequency Input e Visualizer -->
                                <div class="frequency-input-group">
                                    <div class="frequency-controls">
                                        <label for="frequency" class="block text-sm font-medium mb-2">Frequência (Hz)</label>
                                        <div class="flex gap-2">
                                            <input type="number" id="frequency" class="flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 transition" placeholder="Digite a frequência" value="40" min="20" max="20000" step="1" aria-describedby="frequency-description">
                                            <button id="playBtn" class="bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg font-medium transition transform hover:scale-105" aria-label="Tocar frequência">
                                                <i class="fas fa-play mr-2" aria-hidden="true"></i>Tocar
                                            </button>
                                            <button id="stopBtn" class="bg-red-600 hover:bg-red-700 px-6 py-2 rounded-lg font-medium transition transform hover:scale-105 hidden" aria-label="Parar frequência">
                                                <i class="fas fa-stop mr-2" aria-hidden="true"></i>Parar
                                            </button>
                                        </div>
                                        <div id="frequency-description" class="sr-only">Insira uma frequência entre 20 Hz e 20.000 Hz</div>
                                    </div>
                                    <div class="wave-visualizer-small bg-gray-900 rounded-lg p-2">
                                        <h3 class="text-xs font-medium mb-1 text-gray-400 text-center">Onda em Tempo Real</h3>
                                        <canvas id="waveCanvas" width="120" height="80" class="w-full h-full rounded" aria-label="Visualização da forma de onda"></canvas>
                                    </div>
                                </div>

                                <!-- Volume Control -->
                                <div>
                                    <label for="volume" class="block text-sm font-medium mb-2">Volume: <span id="volumeValue">50</span>%</label>
                                    <input type="range" id="volume" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer" min="0" max="100" value="50" aria-describedby="volume-description">
                                    <div id="volume-description" class="sr-only">Ajuste o volume de 0% a 100%</div>
                                </div>

                                <!-- Wave Type Selection -->
                                <div>
                                    <label class="block text-sm font-medium mb-2">Tipo de Onda</label>
                                    <div class="grid grid-cols-4 gap-2">
                                        <button class="wave-type-btn bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded-lg text-sm transition" data-wave="sine" aria-label="Onda Senoidal">
                                            <i class="fas fa-wave-square mr-1" aria-hidden="true"></i>Senoidal
                                        </button>
                                        <button class="wave-type-btn bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded-lg text-sm transition" data-wave="square" aria-label="Onda Quadrada">
                                            <i class="fas fa-square-wave mr-1" aria-hidden="true"></i>Quadrada
                                        </button>
                                        <button class="wave-type-btn bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded-lg text-sm transition" data-wave="sawtooth" aria-label="Onda Dente de Serra">
                                            <i class="fas fa-wave-triangle mr-1" aria-hidden="true"></i>Serra
                                        </button>
                                        <button class="wave-type-btn bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded-lg text-sm transition" data-wave="triangle" aria-label="Onda Triangular">
                                            <i class="fas fa-wave-triangle mr-1" aria-hidden="true"></i>Triangular
                                        </button>
                                    </div>
                                </div>

                                <!-- Timer -->
                                <div>
                                    <button id="timerBtn" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg font-medium transition transform hover:scale-105 w-full" aria-label="Definir timer">
                                        <i class="fas fa-clock mr-2" aria-hidden="true"></i>Programar Timer
                                    </button>
                                </div>
                                <div class="mt-3 bg-gray-900 rounded-lg p-3 hidden" id="timerContainer">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-sm text-gray-400">Tempo Restante</span>
                                        <div id="timerDisplay" class="timer-display text-blue-400">00:00:00</div>
                                    </div>
                                    <div class="w-full bg-gray-700 rounded-full h-2">
                                        <div id="timerProgress" class="timer-progress bg-purple-600 h-full rounded-full" style="width: 0%"></div>
                                    </div>
                                </div>

                                <!-- Benefícios das Frequências -->
                                <div class="space-y-3">
                                    <div class="benefit-card">
                                        <h4><i class="fas fa-bolt text-yellow-400"></i> Energia e Vitalidade</h4>
                                        <p>Frequências específicas como 25 Hz e 50 Hz ajudam a aumentar os níveis de energia, combater a fadiga e melhorar a disposição para atividades diárias.</p>
                                    </div>
                                    
                                    <div class="benefit-card">
                                        <h4><i class="fas fa-brain text-blue-400"></i> Foco e Concentração</h4>
                                        <p>Frequências na faixa de 40 Hz (ondas Gama) estão associadas à melhora da cognição, memória e capacidade de concentração prolongada.</p>
                                    </div>
                                    
                                    <div class="benefit-card">
                                        <h4><i class="fas fa-heart text-red-400"></i> Bem-Estar Emocional</h4>
                                        <p>Frequências como 285 Hz e 639 Hz podem ajudar a reduzir sintomas de depressão, ansiedade e promover equilíbrio emocional.</p>
                                    </div>
                                </div>

                                <!-- Current Frequency Info -->
                                <div id="currentInfo" class="bg-gray-900 rounded-lg p-4">
                                    <div class="text-xl font-bold text-blue-400">40 Hz</div>
                                    <div class="text-lg font-medium">Foco e Concentração</div>
                                </div>
                                <div id="currentDetails" class="bg-gray-900 rounded-lg p-4 text-sm">
                                    <div><strong>Categoria:</strong> <span class="category-badge bg-blue-600">Concentração</span></div>
                                    <div><strong>Descrição:</strong> Frequência para melhorar foco cognitivo e clareza mental.</div>
                                </div>
                                <div id="waveRecommendation" class="bg-gray-900 rounded-lg p-4 text-sm">
                                    <div class="flex items-center gap-2">
                                        <i class="fas fa-lightbulb text-yellow-500"></i>
                                        <span><strong>Onda recomendada:</strong> Senoidal - Proporciona uma experiência mais suave e agradável para estimulação cognitiva.</span>
                                    </div>
                                </div>

                                <!-- Favorite Button -->
                                <button id="favoriteBtn" class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg font-medium transition w-full" aria-label="Adicionar aos favoritos">
                                    <i class="far fa-star mr-2"></i>Adicionar aos Favoritos
                                </button>
                            </div>
                        </section>

                        <!-- Seção de Histórico -->
                        <section class="bg-gray-800 rounded-xl p-6 shadow-2xl" aria-labelledby="history-heading">
                            <h3 id="history-heading" class="text-lg font-semibold mb-4 text-purple-400"><i class="fas fa-history mr-2" aria-hidden="true"></i>Histórico Recente</h3>
                            <div id="historyList" class="space-y-1 max-h-32 overflow-y-auto" aria-live="polite">
                                <!-- Itens do histórico serão adicionados aqui -->
                            </div>
                        </section>
                    </div>

                    <!-- Coluna 2: Banco de Dados de Frequências -->
                    <div class="lg:col-span-7 space-y-6">
                        <section class="bg-gray-800 rounded-xl p-6 shadow-2xl" aria-labelledby="database-heading">
                            <div class="flex justify-between items-center mb-6">
                                <h2 id="database-heading" class="text-2xl font-semibold text-green-400"><i class="fas fa-database mr-2" aria-hidden="true"></i>Banco de Dados de Frequências Terapêuticas</h2>
                                <div class="text-sm text-gray-400"><span id="resultCount">0</span> resultados</div>
                            </div>
                            
                            <!-- Filtros Avançados -->
                            <div class="filter-section">
                                <h3 class="text-lg font-semibold mb-4 text-blue-400">
                                    <i class="fas fa-filter mr-2"></i>Filtros Avançados
                                </h3>
                                
                                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
                                    <div class="filter-group">
                                        <label class="filter-label">Faixa de Frequência (Hz)</label>
                                        <div class="range-slider-container">
                                            <input type="range" id="minFreqRange" class="range-slider" min="20" max="20000" value="20">
                                            <span id="minFreqValue" class="range-value">20</span>
                                        </div>
                                        <div class="range-slider-container mt-2">
                                            <input type="range" id="maxFreqRange" class="range-slider" min="20" max="20000" value="20000">
                                            <span id="maxFreqValue" class="range-value">20000</span>
                                        </div>
                                    </div>
                                    
                                    <div class="filter-group">
                                        <label class="filter-label" for="categoryFilter">Categoria</label>
                                        <select id="categoryFilter" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                            <option value="">Todas as Categorias</option>
                                            <option value="concentracao">Concentração</option>
                                            <option value="energia">Energia</option>
                                            <option value="cura">Cura</option>
                                            <option value="relaxamento">Relaxamento</option>
                                            <option value="sono">Sono</option>
                                            <option value="meditacao">Meditação</option>
                                            <option value="vermifugacao">Vermifugação</option>
                                            <option value="anti-inflamatorio">Anti-inflamatório</option>
                                        </select>
                                    </div>
                                    
                                    <div class="filter-group">
                                        <label class="filter-label" for="evidenceFilter">Evidência Científica</label>
                                        <select id="evidenceFilter" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                            <option value="">Qualquer Nível</option>
                                            <option value="high">Alta</option>
                                            <option value="medium">Média</option>
                                            <option value="low">Baixa</option>
                                        </select>
                                    </div>
                                    
                                    <div class="filter-group">
                                        <label class="filter-label" for="sortBy">Ordenar por</label>
                                        <select id="sortBy" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                            <option value="name">Nome</option>
                                            <option value="frequency">Frequência</option>
                                            <option value="category">Categoria</option>
                                            <option value="efficiency">Eficiência</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="flex justify-end mt-4 space-x-2">
                                    <button id="applyFilters" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg transition">
                                        <i class="fas fa-check mr-2"></i>Aplicar Filtros
                                    </button>
                                    <button id="clearFilters" class="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg transition">
                                        <i class="fas fa-times mr-2"></i>Limpar Filtros
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Container de Resultados -->
                            <div id="resultsContainer" class="space-y-3 max-h-[600px] overflow-y-auto custom-scrollbar">
                                <div class="db-loading">
                                    <div class="db-loading-spinner"></div>
                                </div>
                            </div>
                            
                            <!-- Paginação -->
                            <div id="pagination" class="pagination-container">
                                <!-- Paginação será inserida dinamicamente -->
                            </div>
                        </section>
                    </div>
                </div>
            </section>

            <!-- Seção do Banco de Dados CAFL -->
            <section id="databaseSection" class="db-section">
                <div class="bg-gray-800 rounded-xl p-6 shadow-2xl">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-semibold text-green-400">
                            <i class="fas fa-database mr-2"></i>Banco de Dados CAFL
                        </h2>
                        <div class="text-sm text-gray-400">
                            <span id="dbResultCount">0</span> resultados
                        </div>
                    </div>
                    
                    <!-- Filtros Avançados -->
                    <div class="filter-section mb-6">
                        <h3 class="text-lg font-semibold mb-4 text-blue-400">
                            <i class="fas fa-filter mr-2"></i>Filtros Avançados
                        </h3>
                        
                        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <div class="filter-group">
                                <label class="filter-label">Busca Rápida</label>
                                <div class="relative">
                                    <input type="text" id="dbQuickSearch" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Buscar...">
                                    <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                                </div>
                            </div>
                            
                            <div class="filter-group">
                                <label class="filter-label" for="dbCategoryFilter">Categoria</label>
                                <select id="dbCategoryFilter" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="">Todas as Categorias</option>
                                    <option value="inflamacao">Inflamação</option>
                                    <option value="dor">Dor</option>
                                    <option value="infecao">Infecção</option>
                                    <option value="parasita">Parasita</option>
                                    <option value="virus">Vírus</option>
                                    <option value="bacteria">Bactéria</option>
                                    <option value="fungo">Fungo</option>
                                    <option value="cancer">Câncer</option>
                                    <option value="sistema-nervoso">Sistema Nervoso</option>
                                    <option value="sistema-digestivo">Sistema Digestivo</option>
                                    <option value="respiratorio">Respiratório</option>
                                    <option value="pele">Pele</option>
                                    <option value="mental">Mental/Emocional</option>
                                </select>
                            </div>
                            
                            <div class="filter-group">
                                <label class="filter-label">Faixa de Frequência (Hz)</label>
                                <div class="grid grid-cols-2 gap-2">
                                    <input type="number" id="dbMinFreq" placeholder="Mín" class="bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <input type="number" id="dbMaxFreq" placeholder="Máx" class="bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                </div>
                            </div>
                            
                            <div class="filter-group">
                                <label class="filter-label" for="dbWaveTypeFilter">Tipo de Onda</label>
                                <select id="dbWaveTypeFilter" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="">Todos</option>
                                    <option value="square">Quadrada</option>
                                    <option value="sine">Senoidal</option>
                                    <option value="sawtooth">Dente de Serra</option>
                                    <option value="triangle">Triangular</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="flex justify-end mt-4 space-x-2">
                            <button id="dbApplyFilters" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg transition">
                                <i class="fas fa-check mr-2"></i>Aplicar Filtros
                            </button>
                            <button id="dbClearFilters" class="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg transition">
                                <i class="fas fa-times mr-2"></i>Limpar Filtros
                            </button>
                            <button id="dbExportData" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition">
                                <i class="fas fa-download mr-2"></i>Exportar Dados
                            </button>
                        </div>
                    </div>
                    
                    <!-- Container de Resultados -->
                    <div id="dbResultsContainer" class="space-y-3 max-h-[600px] overflow-y-auto custom-scrollbar">
                        <div class="db-loading">
                            <div class="db-loading-spinner"></div>
                        </div>
                    </div>
                    
                    <!-- Paginação -->
                    <div id="dbPagination" class="pagination-container">
                        <!-- Paginação será inserida dinamicamente -->
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal de Detalhes do Banco de Dados -->
    <div id="dbDetailModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="modal-content rounded-xl p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-start mb-4">
                <h3 id="dbModalTitle" class="text-2xl font-bold text-white"></h3>
                <button onclick="closeDbModal()" class="text-gray-400 hover:text-white text-2xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="dbModalContent" class="space-y-4">
                <!-- Conteúdo do modal será inserido dinamicamente -->
            </div>
        </div>
    </div>

    <!-- Botão voltar ao topo -->
    <button id="topBtn" title="Voltar ao topo">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script>
        // ======== VARIÁVEIS GLOBAIS ========
        let audioContext;
        let oscillator;
        let gainNode;
        let analyser;
        let isPlaying = false;
        let currentWaveType = 'sine';
        let animationId;
        let timerInterval;
        let timerSeconds = 0;
        let history = [];
        let favorites = [];
        let protocols = [];
        let activeProtocol = null;
        let currentStep = 0;
        
        // Variáveis para o banco de dados
        let caflData = [];
        let filteredCaflData = [];
        let dbCurrentPage = 1;
        let dbItemsPerPage = 25;
        let dbFilters = {
            search: '',
            category: '',
            minFreq: '',
            maxFreq: '',
            waveType: ''
        };
        let dbSortBy = 'name';
        
        // ======== INICIALIZAÇÃO ========
        document.addEventListener('DOMContentLoaded', () => {
            // Verificar se deve mostrar o modal de headphones
            const dontShowAgain = localStorage.getItem('dontShowHeadphonesModal');
            if (!dontShowAgain) {
                document.getElementById('headphoneModal').style.display = 'flex';
            }
            
            // Configurar event listeners
            setupEventListeners();
            
            // Inicializar o áudio
            initAudio();
            
            // Carregar dados do banco de dados local
            loadLocalData();
            
            // Inicializar com a seção do gerador visível
            showSection('generator');
            
            // Configurar o botão voltar ao topo
            setupScrollToTop();
            
            // Inicializar o visualizador de onda
            initWaveVisualizer();
        });
        
        // ======== FUNÇÕES DE NAVEGAÇÃO ========
        function showSection(section) {
            // Esconder todas as seções
            document.querySelectorAll('.db-section').forEach(sec => {
                sec.classList.remove('active');
            });
            
            // Remover classe ativa de todas as abas
            document.querySelectorAll('.tab-btn').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Mostrar a seção selecionada
            document.getElementById(section + 'Section').classList.add('active');
            document.getElementById(section + 'Tab').classList.add('active');
            
            // Carregar dados do banco de dados se necessário
            if (section === 'database' && caflData.length === 0) {
                loadCaflData();
            }
        }
        
        // ======== FUNÇÕES DO ÁUDIO ========
        function initAudio() {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                analyser = audioContext.createAnalyser();
                analyser.fftSize = 2048;
            } catch (e) {
                console.error('Erro ao inicializar o áudio:', e);
                showNotification('Seu navegador não suporta a Web Audio API', 'error');
            }
        }
        
        function playFrequency() {
            if (isPlaying) return;
            
            const frequency = parseFloat(document.getElementById('frequency').value);
            if (isNaN(frequency) || frequency < 20 || frequency > 20000) {
                showNotification('Por favor, insira uma frequência válida entre 20 Hz e 20.000 Hz', 'error');
                return;
            }
            
            try {
                oscillator = audioContext.createOscillator();
                gainNode = audioContext.createGain();
                
                oscillator.type = currentWaveType;
                oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
                
                const volume = document.getElementById('volume').value / 100;
                gainNode.gain.setValueAtTime(volume, audioContext.currentTime);
                
                oscillator.connect(gainNode);
                gainNode.connect(analyser);
                analyser.connect(audioContext.destination);
                
                oscillator.start();
                isPlaying = true;
                
                // Atualizar UI
                document.getElementById('playBtn').classList.add('hidden');
                document.getElementById('stopBtn').classList.remove('hidden');
                
                // Adicionar ao histórico
                addToHistory(frequency);
                
                // Iniciar visualização
                visualizeWave();
                
                // Iniciar timer se estiver ativo
                if (timerSeconds > 0) {
                    startTimer();
                }
                
                showNotification(`Tocando ${frequency} Hz`, 'success');
            } catch (e) {
                console.error('Erro ao tocar a frequência:', e);
                showNotification('Erro ao tocar a frequência', 'error');
            }
        }
        
        function stopFrequency() {
            if (!isPlaying) return;
            
            try {
                oscillator.stop();
                isPlaying = false;
                
                // Atualizar UI
                document.getElementById('playBtn').classList.remove('hidden');
                document.getElementById('stopBtn').classList.add('hidden');
                
                // Parar visualização
                if (animationId) {
                    cancelAnimationFrame(animationId);
                }
                
                // Parar timer
                if (timerInterval) {
                    clearInterval(timerInterval);
                }
                
                showNotification('Frequência parada', 'info');
            } catch (e) {
                console.error('Erro ao parar a frequência:', e);
            }
        }
        
        // ======== VISUALIZADOR DE ONDA ========
        function initWaveVisualizer() {
            const canvas = document.getElementById('waveCanvas');
            const canvasCtx = canvas.getContext('2d');
            
            // Desenhar onda inicial
            drawWaveform(canvasCtx, canvas.width, canvas.height, 40);
        }
        
        function visualizeWave() {
            const canvas = document.getElementById('waveCanvas');
            const canvasCtx = canvas.getContext('2d');
            const bufferLength = analyser.frequencyBinCount;
            const dataArray = new Uint8Array(bufferLength);
            
            function draw() {
                animationId = requestAnimationFrame(draw);
                
                analyser.getByteTimeDomainData(dataArray);
                
                canvasCtx.fillStyle = 'rgb(15, 23, 42)';
                canvasCtx.fillRect(0, 0, canvas.width, canvas.height);
                
                canvasCtx.lineWidth = 2;
                canvasCtx.strokeStyle = 'rgb(59, 130, 246)';
                canvasCtx.beginPath();
                
                const sliceWidth = canvas.width * 1.0 / bufferLength;
                let x = 0;
                
                for (let i = 0; i < bufferLength; i++) {
                    const v = dataArray[i] / 128.0;
                    const y = v * canvas.height / 2;
                    
                    if (i === 0) {
                        canvasCtx.moveTo(x, y);
                    } else {
                        canvasCtx.lineTo(x, y);
                    }
                    
                    x += sliceWidth;
                }
                
                canvasCtx.lineTo(canvas.width, canvas.height / 2);
                canvasCtx.stroke();
            }
            
            draw();
        }
        
        function drawWaveform(ctx, width, height, frequency) {
            ctx.fillStyle = 'rgb(15, 23, 42)';
            ctx.fillRect(0, 0, width, height);
            
            ctx.lineWidth = 2;
            ctx.strokeStyle = 'rgb(59, 130, 246)';
            ctx.beginPath();
            
            const amplitude = height / 3;
            const centerY = height / 2;
            const cycles = 3;
            
            for (let x = 0; x < width; x++) {
                const radians = (x / width) * Math.PI * 2 * cycles;
                let y;
                
                switch (currentWaveType) {
                    case 'sine':
                        y = centerY + Math.sin(radians) * amplitude;
                        break;
                    case 'square':
                        y = centerY + (Math.sin(radians) > 0 ? amplitude : -amplitude);
                        break;
                    case 'sawtooth':
                        y = centerY + ((radians % (Math.PI * 2)) / (Math.PI * 2) - 0.5) * amplitude * 2;
                        break;
                    case 'triangle':
                        const period = Math.PI * 2;
                        const phase = radians % period;
                        if (phase < period / 2) {
                            y = centerY + (phase / (period / 2) - 0.5) * amplitude * 2;
                        } else {
                            y = centerY + (1 - (phase - period / 2) / (period / 2) - 0.5) * amplitude * 2;
                        }
                        break;
                    default:
                        y = centerY + Math.sin(radians) * amplitude;
                }
                
                if (x === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            
            ctx.stroke();
        }
        
        // ======== FUNÇÕES DO TIMER ========
        function setupTimer() {
            const hours = parseInt(document.getElementById('timerHours').value) || 0;
            const minutes = parseInt(document.getElementById('timerMinutes').value) || 0;
            const seconds = parseInt(document.getElementById('timerSeconds').value) || 0;
            
            timerSeconds = hours * 3600 + minutes * 60 + seconds;
            
            if (timerSeconds <= 0) {
                showNotification('Por favor, defina um tempo válido', 'error');
                return;
            }
            
            document.getElementById('timerContainer').classList.remove('hidden');
            updateTimerDisplay();
            
            if (isPlaying) {
                startTimer();
            }
            
            showNotification('Timer configurado', 'success');
        }
        
        function startTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            timerInterval = setInterval(() => {
                timerSeconds--;
                updateTimerDisplay();
                
                if (timerSeconds <= 0) {
                    clearInterval(timerInterval);
                    stopFrequency();
                    showNotification('Timer concluído', 'success');
                }
            }, 1000);
        }
        
        function updateTimerDisplay() {
            const hours = Math.floor(timerSeconds / 3600);
            const minutes = Math.floor((timerSeconds % 3600) / 60);
            const seconds = timerSeconds % 60;
            
            const display = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timerDisplay').textContent = display;
            
            // Atualizar barra de progresso
            const totalTime = parseInt(document.getElementById('timerHours').value) * 3600 + 
                             parseInt(document.getElementById('timerMinutes').value) * 60 + 
                             parseInt(document.getElementById('timerSeconds').value);
            const progress = ((totalTime - timerSeconds) / totalTime) * 100;
            document.getElementById('timerProgress').style.width = `${progress}%`;
        }
        
        // ======== FUNÇÕES DE HISTÓRICO E FAVORITOS ========
        function addToHistory(frequency) {
            const timestamp = new Date().toLocaleTimeString();
            history.unshift({ frequency, timestamp });
            
            // Manter apenas os 10 mais recentes
            if (history.length > 10) {
                history = history.slice(0, 10);
            }
            
            updateHistoryDisplay();
            saveLocalData();
        }
        
        function updateHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '';
            
            if (history.length === 0) {
                historyList.innerHTML = '<div class="text-gray-500 text-sm text-center py-2">Nenhum histórico</div>';
                return;
            }
            
            history.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'flex justify-between items-center py-1 px-2 hover:bg-gray-700 rounded cursor-pointer';
                historyItem.innerHTML = `
                    <span class="text-sm">${item.frequency} Hz</span>
                    <span class="text-xs text-gray-400">${item.timestamp}</span>
                `;
                historyItem.addEventListener('click', () => {
                    document.getElementById('frequency').value = item.frequency;
                    updateFrequencyInfo(item.frequency);
                });
                historyList.appendChild(historyItem);
            });
        }
        
        function toggleFavorite() {
            const frequency = parseFloat(document.getElementById('frequency').value);
            const index = favorites.findIndex(f => f.frequency === frequency);
            
            if (index === -1) {
                // Adicionar aos favoritos
                favorites.push({
                    frequency,
                    name: document.getElementById('currentInfo').querySelector('.text-lg').textContent,
                    category: document.querySelector('#currentDetails .category-badge').textContent
                });
                document.getElementById('favoriteBtn').innerHTML = '<i class="fas fa-star mr-2"></i>Remover dos Favoritos';
                showNotification('Adicionado aos favoritos', 'success');
            } else {
                // Remover dos favoritos
                favorites.splice(index, 1);
                document.getElementById('favoriteBtn').innerHTML = '<i class="far fa-star mr-2"></i>Adicionar aos Favoritos';
                showNotification('Removido dos favoritos', 'info');
            }
            
            saveLocalData();
        }
        
        // ======== FUNÇÕES DE INFORMAÇÕES DE FREQUÊNCIA ========
        function updateFrequencyInfo(frequency) {
            // Atualizar informações básicas
            document.getElementById('currentInfo').innerHTML = `
                <div class="text-xl font-bold text-blue-400">${frequency} Hz</div>
                <div class="text-lg font-medium">${getFrequencyName(frequency)}</div>
            `;
            
            // Atualizar detalhes
            const category = getFrequencyCategory(frequency);
            document.getElementById('currentDetails').innerHTML = `
                <div><strong>Categoria:</strong> <span class="category-badge bg-${getCategoryColor(category)}-600">${getCategoryName(category)}</span></div>
                <div><strong>Descrição:</strong> ${getFrequencyDescription(frequency)}</div>
            `;
            
            // Atualizar recomendação de onda
            const waveType = getRecommendedWaveType(frequency);
            document.getElementById('waveRecommendation').innerHTML = `
                <div class="flex items-center gap-2">
                    <i class="fas fa-lightbulb text-yellow-500"></i>
                    <span><strong>Onda recomendada:</strong> ${getWaveTypeName(waveType)} - ${getWaveTypeDescription(waveType)}</span>
                </div>
            `;
            
            // Verificar se é favorito
            const isFavorite = favorites.some(f => f.frequency === frequency);
            document.getElementById('favoriteBtn').innerHTML = isFavorite 
                ? '<i class="fas fa-star mr-2"></i>Remover dos Favoritos'
                : '<i class="far fa-star mr-2"></i>Adicionar aos Favoritos';
        }
        
        function getFrequencyName(frequency) {
            const frequencyInfo = {
                20: 'Energia Vital',
                25: 'Energia e Vitalidade',
                40: 'Foco e Concentração',
                50: 'Energia e Vitalidade',
                100: 'Alívio da Dor',
                285: 'Bem-Estar Emocional',
                396: 'Liberação de Medo',
                417: 'Transformação',
                528: 'Amor e Cura',
                639: 'Relacionamentos',
                741: 'Despertar da Intuição',
                852: 'Retorno à Ordem Espiritual',
                963: 'Conexão Divina'
            };
            
            return frequencyInfo[frequency] || 'Frequência Personalizada';
        }
        
        function getFrequencyCategory(frequency) {
            if (frequency >= 20 && frequency < 50) return 'energia';
            if (frequency >= 50 && frequency < 100) return 'cura';
            if (frequency >= 285 && frequency < 400) return 'mental';
            if (frequency >= 396 && frequency < 1000) return 'espiritual';
            return 'personalizada';
        }
        
        function getFrequencyDescription(frequency) {
            const descriptions = {
                20: 'Frequência para aumentar os níveis de energia e combater a fadiga.',
                25: 'Estimula o corpo e a mente, aumentando a vitalidade.',
                40: 'Ondas Gama associadas à melhora da cognição e concentração.',
                50: 'Promove energia e vitalidade para atividades diárias.',
                100: 'Ajuda a aliviar dores e desconfortos físicos.',
                285: 'Pode ajudar a reduzir sintomas de depressão e ansiedade.',
                396: 'Liberação de medos e sentimentos negativos.',
                417: 'Facilita transformações e mudanças na vida.',
                528: 'Conhecida como frequência do amor e da cura.',
                639: 'Harmoniza relacionamentos e conexões.',
                741: 'Desperta a intuição e a percepção.',
                852: 'Ajuda a retornar ao equilíbrio espiritual.',
                963: 'Conecta com estados de consciência elevados.'
            };
            
            return descriptions[frequency] || 'Frequência personalizada para uso terapêutico.';
        }
        
        function getRecommendedWaveType(frequency) {
            if (frequency >= 20 && frequency < 50) return 'sine';
            if (frequency >= 50 && frequency < 100) return 'square';
            if (frequency >= 285 && frequency < 400) return 'sine';
            if (frequency >= 396 && frequency < 1000) return 'triangle';
            return 'sine';
        }
        
        function getWaveTypeName(waveType) {
            const names = {
                'sine': 'Senoidal',
                'square': 'Quadrada',
                'sawtooth': 'Dente de Serra',
                'triangle': 'Triangular'
            };
            return names[waveType] || waveType;
        }
        
        function getWaveTypeDescription(waveType) {
            const descriptions = {
                'sine': 'Proporciona uma experiência suave e agradável.',
                'square': 'Mais intensa, ideal para tratamentos físicos.',
                'sawtooth': 'Energizante, boa para estimulação mental.',
                'triangle': 'Equilibrada, combina suavidade e eficácia.'
            };
            return descriptions[waveType] || 'Tipo de onda padrão.';
        }
        
        function getCategoryColor(category) {
            const colors = {
                'energia': 'yellow',
                'cura': 'green',
                'mental': 'purple',
                'espiritual': 'blue',
                'personalizada': 'gray'
            };
            return colors[category] || 'gray';
        }
        
        function getCategoryName(category) {
            const names = {
                'energia': 'Energia',
                'cura': 'Cura',
                'mental': 'Mental',
                'espiritual': 'Espiritual',
                'personalizada': 'Personalizada'
            };
            return names[category] || 'Personalizada';
        }
        
        // ======== FUNÇÕES DO BANCO DE DADOS CAFL ========
        function loadCaflData() {
            // Mostrar loading
            document.getElementById('dbResultsContainer').innerHTML = `
                <div class="db-loading">
                    <div class="db-loading-spinner"></div>
                </div>
            `;
            
            // Simular carregamento assíncrono
            setTimeout(() => {
                // Dados do CAFL (versão reduzida para exemplo)
                const rawData = `CAFL
Lista de frequências anotadas consolidada, v2023_05_25, turf@mindspring.com
Todas as frequências em Hz
Inflamação abdominal - 2720, 2489, 2170, 2000, 1865, 1800, 1600, 1550, 880, 832, 802, 787, 776, 727, 660, 465, 450, 444, 440, 428, 380, 250, 146, 125, 95, 72, 20, 1,2
Dor abdominal - 10000, 3000, 95, 3
Abcessos (também use Staphylococcus aureus e veja Listeriose) - 2720, 2170, 1865, 1550, 880, 802, 787, 727, 500, 444, 190
Abcessos_1 - 2720, 2170, 1865, 1550, 880, 802, 787, 760, 727, 690, 660, 500, 465, 450, 444, 428, 190
Abcessos_secundários - 1550, 802, 760, 660, 465, 450, 444, 428
Acidose (hiperacidez. Também use um suplemento de cálcio e magnésio a longo prazo) - 10000, 880, 802, 787, 776, 727, 146, 20
Acne (execute 564 por 6 min) - 2720, 2170, 1800, 1600, 1550, 1552, 1500, 802, 880, 778, 787, 760, 741, 727, 660, 564, 465, 450, 444, 428
Acônito (usado para estimular a produção de linfócitos) - 3347, 5611, 2791
Actinobacillus (uma bactéria potencialmente patogênica encontrada em mamíferos, 773*, 776*, 778*, 822*) - 488, 565, 672, 674, 678, 773, 766, 768, 776, 777, 778, 822, 885, 887, 7877, 9687, 42664, 42666, 46668, 46787
Actinomyces_israelii (uma bactéria normalmente encontrada no intestino e na garganta que pode causar buracos profundos e cheios de pus no tecido. Veja também Streptothrix, 222*, 262*, 488*, 567*, 7880*) - 23, 222, 262, 2154, 465, 488, 567, 7880, 10000, 787, 747, 727, 20, 660, 690, 160, 73, 1.1
Actinomicose (usar Streptothrix)
Campo_de_perturbação_de_acupuntura (foco na cicatriz) - 5.9
Dor aguda - 3000, 95, 10000, 1550, 802, 880, 787, 727, 690, 666
Adenóides - 1550, 802, 880, 787, 776, 727, 444, 20, 428, 660, 2720, 2170, 14, 333, 523, 768, 786, 428, 1865, 590, 690, 780, 807, 810, 1570, 2000
Adenoma_cervical (tumor epitelial do colo do útero que pode ser benigno ou maligno. Veja também Câncer.) - 433
Adenovírus (um vírus que pode causar resfriados/gripes e infecções nos pulmões, estômago e intestinos) - 333, 523, 666, 786, 768, 959, 962
Adenovirus_36 (AD-36 pode estar relacionado ao ganho de peso em alguns casos) - 8875, 6140, 5859, 5797, 5219
Adenovirus_comp - 10000, 7767, 7762, 7702, 7009, 7001, 6989, 5000, 4868, 2720, 2050, 1500, 1395, 1062, 1060, 1034, 1009, 969, 968, 962, 959, 960, 952, 951, 942, 880, 1550, 802, 787, 768, 728, 690, 660, 555, 523, 522, 1865, 444, 333, 300, 180, 160, 125, 95, 72, 60, 48, 26, 20
Adenovírus_HC - 28729,05, 16628,88, 18471,00, 18670,15, 19566,32, 1407,93, 827,90, 919,62, 929,53, 974,15
Aderências - 2720, 2170, 1550, 802, 880, 787, 776, 760, 727, 660, 190
Anexite (inchaço dos ovários ou trompas de Falópio) - 440, 441, 522, 572, 3343, 3833, 5312
Estimulante_adrenal - 10, 20, 2250
Adynamia_geriatric (fadiga da idade) - 410, 220, 100, 60, 27,5
Aflatoxina (uma toxina prejudicial ao fígado produzida por certos fungos alimentares) - 344, 510, 943, 474, 476, 568
Aflatoxina_HC - 438,74, 466,01, 9359,97, 8812,31
Tripanossomíase africana - 656, 988, 780
Agyfla_HC - 3534,88, 175,99
AIDS_1 (não para uso nos EUA, veja HIV) - 2489, 465, 727, 787, 880, 1550, 1500, 1,2, 31000, 31750, 34750
AIDS_2 - 1,44, 1550, 1500, 249, 418, 727, 787, 880, 2489, 3100, 3175, 3475
AIDS_Kaposis_sarcoma (use Cancer_Kaposis_sarcoma)
AIDS_secundário (use 1113 por 12 min, 2128 por 16 min, 6121 por 21 min, 33 por 1 min) - 1113, 2128, 6121, 33
Acatisia - 230, 7,83, 3
Alcoolismo - 10000
Alergia (ver também Coqueluche) - 10000, 7344, 5000, 1550, 1234, 740, 880, 835, 787, 727, 500, 330, 160, 30, 3
Alergia_1 - 10000, 1865, 880, 787, 727, 690, 660, 555, 522, 473, 444, 330, 290, 146, 125, 95, 72, 33, 20, 3
Allergy_pollen_TR (pulso 64 75, convergência 2 0,03125, permanência 500) - 116113, 119061,03, 119441,8
Alopecia (perda de cabelo) - 10000, 30000, 5000, 2720, 2170, 1552, 880, 800, 787, 727, 465, 330, 146, 95, 28, 20, 3
Estreptococo alfa HC - 18919,09, 18670,15, 941,93, 929,53
ALS_1 (esclerose lateral amiotrópica, possivelmente causada por micoplasma fermentans. Use também MS e veja Echo virus, Coxsackie, Herpes 6, Bartonella e frequências de Lyme. Use 2900 por 30 min) - 2900, 864, 790, 690, 610, 470, 484, 986, 644, 254
ALS_2 (Potenciais vírus causadores) - 5000, 3636, 2632, 1850, 1500, 1488, 1422, 1189, 1044, 922, 868, 845, 822, 788, 776, 766, 742, 733, 721, 676, 654, 625, 620, 607, 608, 609, 610, 611, 612, 613, 595, 515, 487, 461, 435, 423, 380, 322, 283, 232, 144, 136, 20
ALS_3 (use 2900 por 60 min) - 2900
ALS_4 (também usado para MS) - 10000, 5000, 2900, 2750, 2700, 2145, 938, 862, 841, 777, 766, 741, 739, 688, 682, 660, 572, 532, 520, 477, 442, 433, 344, 343, 342, 338, 324, 322, 253, 242, 112
ALS_5 (use 2900 por 20 min) - 2900, 986, 864, 790, 728, 690, 660, 644, 980, 692, 610, 484, 254
Alternaria_tenuis (um fungo associado a doenças pulmonares) - 853, 304
Alzheimers_1 (veja também conjuntos de ELA) - 430, 620, 624, 840, 866, 5148, 2213, 19180,5, 742,4, 303, 23,2, 3773,3, 943,3, 471,66, 470,9, 941,8, 3767,3
Alzheimer_2 - 19180,5, 2213, 5148, 866, 840, 624, 620, 430
Alzheimer_TR - 430, 620, 624, 866, 5148, 2213, 1918, 742,4, 303, 23,2, 2900, 864, 790, 690, 610, 470, 484, 986, 644, 254, 30, 33, 6
Amenorréia (ausência de menstruação) - 10000, 880, 1550, 802, 787, 760, 727, 465, 20
Ameba (um microrganismo unicelular, às vezes infeccioso) - 310, 333, 532, 732, 769, 827, 1522
Amoeba_hepar_abcess (abcesso hepático causado por infecção amebiana) - 344, 605, 510, 943
Disenteria amebiana (use Entamoeba histolytica)
Esclerose lateral amiotrópica (usar ELA)
Anal_itching (também use Parasitas enterobíase e veja Conjunto geral de parasitas) - 10000, 880, 787, 760, 727, 465, 125, 120, 95, 72, 444, 1865, 20, 773, 826, 827, 835, 4152
Anafilaxia - 10000
Anaplasma_marginale_HC - 19267,60, 959,28, 21010,14, 1046,03
Aneurisma - 880, 787, 760, 727, 465, 125, 95, 72, 444, 1865, 20, 727
Angina_angustia (inflamação do gânglio linfático da garganta) - 787, 776, 727, 690, 465, 428, 660
Angina_pectoris - 3, 230, 2720, 2170, 1800, 1600, 1500, 880, 832, 787, 776, 727, 465, 444, 1865, 125, 95, 72, 20, 660, 7,83
Espondilite anquilosante (artrite da coluna. Use 326 períodos mais longos após o acúmulo) - 3000, 95, 1550, 802, 880, 787, 776, 727, 650, 625, 600, 28, 10, 35, 28, 7,69, 1,2, 110, 100, 60, 428, 680, 326
Anosmia (perda do olfato) - 20, 10000
Antraz (veja também Bacillus_anthracis_HC) - 4000, 16655, 1370, 1365, 930, 900, 768, 633, 500, 420, 414, 400, 273, 224, 129
Antraz_1 - 644, 643, 642, 639, 638, 637, 634, 633, 632, 629, 628, 627, 624, 623, 622
Antisséptico (use antisséptico geral)
Ansiedade_1 (Transtorno de ansiedade geral. Use 1,5 por 3 min, 6,8, 7,8 por 5 min, 95 por 3 min, 10000 por 5 min) - 1,5, 6,8, 7,8, 95, 10000
Apoplexia_derrame_paralisia - 40, 1800, 880, 787, 727, 650, 625, 600, 125, 95, 72, 20, 1865, 522, 428
Apendicite (Procure ajuda médica! Se ocorrer microperfuração, a infecção deve ser eliminada antes de beber água ou comer. Mesmo algumas gotas de água podem ser fatais) - 1550, 802, 880, 787, 727, 444, 380, 190, 10, 650, 444, 522, 125, 95, 72, 20, 522, 146, 440, 450
Apendicite_1 - 1770, 1570, 880, 807, 804, 1550, 802, 787, 728, 690, 660, 622, 650, 625, 600, 450, 1865, 444, 440, 380, 190, 146, 125, 522, 95, 72, 20, 10
Falta_de_apetite_de - 465, 444, 1865, 125, 95, 72, 20, 10000, 880, 787, 727
Arenas_tennus - 667
Arnica (uma erva de cura tópica) - 1042, 1032
Arryhthmia_heart_TR (também use magnésio, CoQ10 e óleo de peixe) - 696, 7,83
Arsenic_alb (sal celular homeopático) - 562
Arteriosclerose (endurecimento das artérias; a regeneração leva tempo. Experimente também nanobactérias, coxsackie e frequências de CMV) - 10000, 2720, 2170, 1800, 1600, 1500, 880, 787, 776, 727, 20
Artrite_A - 1500, 727, 784, 880
Artrite_artralgia_devido_à_gota - 9.39
Artrite (artrose e distúrbios da paratireoide que afetam o metabolismo do cálcio) - 9,6
Artrite (origem focal gastrogênica tonsiltogênica e paresia) - 9,39
Artrite_geral (use Strep pneumonia e Mycoplasma geral se necessário) - 10000, 5000, 2720, 1664, 1550, 1500, 962, 880, 802, 800, 787, 776, 766, 727, 688, 683, 650, 625, 600, 120, 20
Artrite_1 (use 1,5 por 10 min, 120 por 20 min) - 10000, 5000, 3176, 3000, 2720, 1664, 1550, 1500, 880, 802, 787, 770, 728, 690, 660, 512, 250, 230, 120, 100, 80, 60, 40, 30, 28, 26, 25, 20, 10, 9,4, 9,39, 7,7, 7,69, 3, 1,5, 1,2
Artrite_reumatoide (A causa pode ser bactérias como estreptococos pneumoniae, clamídia pneumonia, micoplasma fermentans ou bactérias dentárias que também devem ser tratadas. Tente também antisséptico geral e parasitas lombrigas em geral se não houver resposta. Use 766 períodos mais longos após a acumulação.) - 250, 1,2, 650, 625, 600, 787, 727, 262, 776, 766
Artrite_secundária - 2720, 1000, 1500, 770
Gripe_asiática_A - 516, 656, 434
Aspergillus_flavus (mofo encontrado em milho, amendoim e grãos que produz aflatoxina) - 1823, 247, 1972
Aspergillus_geral - 1972, 1823, 758, 743, 697, 524, 374, 339, 247
Aspergillus_glaucus (mofo azul que ocorre em alguns processos infecciosos humanos) - 524, 758
Aspergillus_niger (mofo comum que pode produzir infecção grave e persistente) - 374, 697
Aspergillus_terreus (mofo ocasionalmente associado à infecção dos brônquios e pulmões) - 743, 339
Asma (veja também Suporte ao fígado e Parasitas ascaris e use Mycoplasma geral se necessário) - 7344, 3702, 3672, 2720, 2170, 1800, 1600, 1500, 1283, 1234, 1233, 880, 787, 727, 522, 444, 146, 125, 95, 72, 20, 0,5
Asma_1 - 1283, 1233, 4.7
Asma_2 (todas as frequências por 5 min) - 1234, 3672, 7346, 727, 787, 880, 10000, 47, 120
Asma_v - 3125, 3124, 890, 886, 871, 822, 782, 756, 712, 665, 633, 521, 515, 487, 434, 411, 322, 263, 172, 128
Astrocitoma (use Câncer, astrocitoma)
Ataxia (incoordenação dos músculos. Resultados lentos em alguns casos) - 2720, 2170, 1800, 1600, 1500, 880, 787, 776, 727, 650, 625, 600, 444, 1865, 125, 95, 72, 20
Ataxia_espástica - 9,19, 8,25, 7,69
Aterosclerose (os micróbios comumente presentes na placa são herpes zoster e pneumonia por clamídia, este conjunto combina os dois. Use também magnésio e vitamina C para ajudar a reduzir depósitos minerais) - 7543,4, 7520,5, 4710,5, 3773,3, 3760,3, 1886, 1880, 943,3, 940, 620, 479, 471,66, 470,9, 941,8, 3767,3, 7160, 3343, 2431, 2323, 1577, 1544, 40887, 958, 934, 787, 786, 738, 718, 716, 686, 668, 643, 576, 574, 573, 572, 563, 554, 542, 453, 446, 436, 425, 423, 411, 345, 333, 223, 134
Pé de atleta (veja também as frequências de Epidermophyton floccinum, Tinea e Trichophyton rubrum. Use todas as frequências por 5 min) - 20, 379, 727, 787, 880, 5000, 644, 766, 464, 802, 1552, 9999, 752, 923, 3176, 304
Atmênico_Alb - 562
Distúrbio_do_déficit_de_atenção (Provavelmente é importante evitar conservantes, aspartame, corantes, MSG e outras toxinas potenciais, além de limitar açúcar e amidos, mas garantir proteína adequada e bons óleos na dieta. Experimente Shigella, Chlamydia pneum. e antisséptico geral)
Autismo (é necessário fazer desintoxicação de mercúrio e alumínio se for um problema. Tente Measles_w_vaccine.)
Autointoxicação - 522, 146, 1550, 10000, 800, 880, 787, 727, 20
Babesia - 76, 570, 1583, 1584, 432, 753, 5776
Bacillinum (nosódio homeopático) - 132, 423, 432, 785, 853, 854, 921, 1027, 1042, 1932
Bacillus_anthracis_HC - 19665,89, 18122,49, 18321,64, 19317,38, 961,76, 912,18, 902,27, 979,11
Baccilus_cereus - 18645,26, 928,29
Bacillus_Coli_Rod_Form - 8020, 800, 683, 417, 318
Bacillus_Coli_Vírus - 17220, 11103, 8581, 2872, 1722, 1552, 770
Infecções por Bacillus (B. coli, B. coli bacilo) - 787, 880, 802, 727, 1552, 800
Bacillus_lichenoformis - 2655, 21554
Bacillus_subtilis (pode causar conjuntivite) - 432, 722, 822, 1246
Bacillus_subtilis_niger_HC - 19168.02, 18919.09, 18670,15, 954.32, 941.93, 929,53
Bacilo_thuringiensis - 520, 2551, 902, 1405
Dor nas costas_1 (se não houver alívio com estes, use frequências de estimulação renal, magnésio e B6, e beba bastante água. Use 212 e 305 por 6 min e 33 por 5 min) - 10000, 1550, 880, 802, 787, 760, 727, 305, 212, 41,2, 33
Dor nas costas_2 - 787, 784, 776, 728, 727, 465, 432, 9,6, 9,4, 9,3, 7,7, 7,6, 3, 0,5
Dor nas costas e espasmos_1 - 120, 212, 240, 424, 465, 528, 760, 727, 787, 880, 1550, 2112, 5000, 10000
Dor nas costas_crônica_inferior_1 (use com as costas voltadas para o tubo. Use 728 por 30min) - 728
Bactéria_lactis_nosode - 512, 526, 798, 951, 5412
Cápsulas bacterianas_HC - 20786.10, 17923.34, 1034.88, 892,35
Bacterial_infections_general (se a infecção bacteriana for crônica e o tipo for diagnosticado com precisão e nem as frequências nem os antibióticos forem eficazes a longo prazo, use também os conjuntos Parasitas gerais e lombrigas. Veja também Antissépticos gerais e tipos específicos.) - 20, 465, 866, 664, 690, 727, 787, 832, 800, 880, 1550, 784
Bacterium_coli (um tipo de E. coli normalmente encontrado nos intestinos, água, leite e solo, que é a causa mais frequente de infecções do trato urinário e uma causa comum de infecção de feridas) - 642, 358, 539
Bactéria_coli_comuna_combinação - 282, 333, 413, 957, 1320, 1722
Bacteroides_fragilis (usar com conjunto Parasitas ascaris) - 633, 634, 635, 636, 637
Bacteroides_fragilis_HC - 16180,80, 16230,58, 808,07, 805,59
Mau hálito (use Halitose)
Bakers_Yeast_allergy (preparação homeopática) - 775, 843, 1000
Balantidium_coli_HC (cistos. B. coli é o maior protozoário ciliado encontrado em humanos e pode causar colite grave com ulcerações) - 22902.05, 1140,23
Síndrome de Bantis (Doença na qual os vasos sanguíneos entre os intestinos e o fígado ficam bloqueados, levando à congestão das veias, aumento do baço, sangramento do estômago e intestinos, cirrose hepática e destruição das células sanguíneas.) - 1778
Carvão de cevada (preparação homeopática para um alérgeno) - 377, 224, 1447
Barretts_esophagus_1 (alterações nas células esofágicas geralmente causadas por refluxo ácido. use 2127,5 por 6 min) - 10000, 880, 802, 787, 776, 676, 727, 20, 146, 2127,5
Bartonella_henslae (vírus que causa a febre da arranhadura do gato) - 364, 379, 645, 654, 786, 840, 842, 844, 846, 848, 850, 857, 967, 6878, 634, 696, 716, 1518
Basidiomicetos - 751
BC_G_Vacina - 277, 768, 832, 725
Enurese (ver também Parasita geral, oxiúros e frequências de ascaris) - 1550, 880, 802, 787, 727, 465, 120, 112, 7,83
Escaras - 880, 1550, 802, 787, 784, 728, 727, 465, 20, 1,2, 73
Bells_Palsy_1 (veja também Herpes_general) - 2,4, 3, 3,9, 7,83, 20, 27,57, 33, 35, 40, 47,5, 57,5, 72, 90,88, 110, 125, 194, 222, 304, 393,5, 464, 565,5, 600, 625, 650, 727, 776, 787, 833, 880, 932,5, 1250
Bermuda_smut (preparação homeopática para um alérgeno) - 422, 767, 847, 971, 644, 780
Besnoitia_HC (protozoário retirado da seção pulmonar) - 17823,77, 887,39
Beta_estreptococo_HC - 19168.02, 954,32
Ducto biliar_1 (espasmos e dor) - 2, 2.2, 2.5, 2.7, 3.2, 3.5
Cirrose biliar (uma condição inflamatória na qual o fluxo de bile através do fígado é obstruído) - 381, 514, 677, 2271, 1250, 170, 715, 774, 776
Dor de cabeça biliar - 8,5, 3,5
Biliousness - 1550, 802, 10000, 880, 832, 787, 727, 465
Bilirrubina (um pigmento biliar que pode resultar em icterícia em altas concentrações. Veja também Suporte ao fígado) - 717, 726, 731, 863, 9305, 649, 734
Aranha_viúva_negra - 376, 728
Queixas_da_bexiga_e_da_próstata - 2050, 880, 1550, 802, 787, 727, 465, 20, 9,39
Bexiga_TBC - 642, 771, 360, 726, 724
Blastocystis_hominis (595*, 13469*) - 365, 595, 844, 848, 1201, 1243, 5777, 11425, 11841, 11967, 13145, 13469, 21776
Blefarisma - 3120
Blefarisma_HC - 20238.44, 1007.61
Doenças do sangue - 880, 787, 727
Pressão_sanguínea_alta (use Hipertensão)
Pressão_sanguínea_baixa (use Hipotensão)
Blue_cohosh (uma erva curativa) - 364
Furúnculos (use Furunkulose)
Doença_óssea_e_doença_periodontal (veja Osteo freq. Use 728 por 15min. combine com nutrição adequada, especialmente proteínas e ácidos graxos essenciais, e minerais, especialmente cálcio e magnésio) - 47,5, 1800, 1600, 650, 625, 600, 880, 787, 776, 728
Regeneração óssea (combinar com nutrição adequada, especialmente proteínas, e minerais, especialmente cálcio e magnésio) - 2720, 10000
Bone_spurs (também use suplemento mineral mais bromelina em altas doses e água) - 1,2, 120, 250
Trauma ósseo (cortes, fraturas) - 380, 1550, 802, 10000, 880, 787, 727, 2720
Bordetella_pertussis_HC - 16479,52, 820,47
Borrelia (use doença de Lyme)
Borrelia_burgdorferi_HC (causa doença de Lyme, veja também Lyme_disease) - 18919.09, 941,93
Botrítis - 1545
Botrytis_cinereas - 1132, 212
Botulinum (um bacilo que causa uma forma frequentemente fatal de intoxicação alimentar) - 518, 533, 639, 172, 1372, 691, 683, 253, 435, 668, 775, 2688, 660, 690, 727, 802, 1550, 831, 1552, 10000
Neuralgia_braquial - 0,5
Brain_beta_stim_TR (7,83 executado em serviço 5, 22 e 19,5 executado em serviço 30 e pulso 7,83 50) - 7,83, 22, 19,5
Tumor cerebral (use tipo específico: câncer, droglioma, astrocitoma e/ou glioma)
Branhamella_Moraxella_catarrhalis - 2013, 579, 581, 687, 770, 772, 775, 778, 2013
Branhamella_Neisseria_catarrhalis_HC - 19715.68, 981,59
Cistos de miomas mamários (use também cápsulas de casca de noz preta e tocoferóis mistos, se possível) - 1550, 1384, 880, 802, 787, 776, 727, 690, 666, 267
Breast_tumor_benign_TR (também inclui varredura de 19351,563 a 10406,25 por .03125 de permanência 1) - 174, 482, 785, 1132, 5311, 3965, 405, 633, 191, 178, 731, 6646, 178, 739,8, 2959,4, 1234, 3702, 3672, 7344, 7760, 10357, 10380
Respiração_profunda - 1234, 3702, 3672, 7344, 7760
Brights_syndrome (use Nefrite)
Asma brônquica (use Asma)
Pneumonia brônquica (use Pneumonia, brônquica)
Bronquiectasia (dilatação crônica dos brônquios) - 342, 510, 778
Bronquite - 7344, 3672, 1234, 880, 743, 727, 683, 464, 452, 333, 72, 20, 9,39, 9,35
Bronquite_secundária - 776, 766, 688
Broncopneumonia_borinum (use Pneumonia, brônquica)
Picada de aranha marrom reclusa (também use bastante equinácea e vitamina C) - 724, 884, 1830, 3260, 30008
Brucella_abortus (febre ondulante ou bacilo de Bang, encontrado em bovinos) - 1423
Brucella_melitensis (forma de Brucella encontrada em cabras e ovelhas) - 748, 643, 695
Contusões - 9.1, 110, 10000
Praga_bubônica (use Versenia pestis)
Infecções secundárias da peste bubônica - 880, 787, 727, 20
Joanete_dor - 20
Queimaduras - 190, 10000, 880, 787, 727, 465, 200
Bursite (pode ser causada por vários organismos e vírus; experimente também com frequências de artrite.) - 880, 787, 727
BX_Virus (use Cancer_BX_virus)
BY_Virus (use Cancer_BY_virus)
Celiácia - 674
Calcificações - 326
Calmante - 6000
Campylobacter (bactéria que causa diarreia infecciosa súbita em recém-nascidos, 732*, 1633*, 333*) - 732, 733, 1633, 1834, 2222, 786, 768, 523, 333, 378, 705,86, 2823,5
Campylobacter_fetus_HC (esfregaço) - 18321,64, 912,18
Campylobacter_pyloridid_HC - 17674,41, 879,96`;
                
                // Processar os dados
                caflData = processCaflData(rawData);
                filteredCaflData = [...caflData];
                
                // Configurar event listeners
                setupDbEventListeners();
                
                // Renderizar resultados
                renderDbResults();
                updateDbStats();
            }, 1000);
        }
        
        function processCaflData(data) {
            const lines = data.split('\n');
            const frequencies = [];
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line || line.startsWith('CAFL') || line.startsWith('Lista de frequências') || line.startsWith('Todas as frequências')) {
                    continue;
                }
                
                if (line.includes(' - ')) {
                    const parts = line.split(' - ');
                    if (parts.length >= 2) {
                        const name = parts[0].trim();
                        const freqValues = parts[1].trim();
                        
                        // Determinar categoria baseada no nome
                        let category = 'geral';
                        const nameLower = name.toLowerCase();
                        
                        if (nameLower.includes('inflamação') || nameLower.includes('inflamacao')) category = 'inflamacao';
                        else if (nameLower.includes('dor') || nameLower.includes('algia')) category = 'dor';
                        else if (nameLower.includes('infec') || nameLower.includes('bacteria') || nameLower.includes('bacillus')) category = 'bacteria';
                        else if (nameLower.includes('virus') || nameLower.includes('vírus')) category = 'virus';
                        else if (nameLower.includes('fungo') || nameLower.includes('aspergillus') || nameLower.includes('candida')) category = 'fungo';
                        else if (nameLower.includes('cancer') || nameLower.includes('tumor') || nameLower.includes('carcinoma')) category = 'cancer';
                        else if (nameLower.includes('parasita') || nameLower.includes('ameba') || nameLower.includes('giardia')) category = 'parasita';
                        else if (nameLower.includes('asma') || nameLower.includes('bronquite') || nameLower.includes('respiratorio')) category = 'respiratorio';
                        else if (nameLower.includes('pele') || nameLower.includes('dermat') || nameLower.includes('acne')) category = 'pele';
                        else if (nameLower.includes('ansiedade') || nameLower.includes('depress') || nameLower.includes('mental')) category = 'mental';
                        else if (nameLower.includes('sistema nervoso') || nameLower.includes('neuro') || nameLower.includes('als') || nameLower.includes('alzheimer')) category = 'sistema-nervoso';
                        else if (nameLower.includes('digestivo') || nameLower.includes('intestinal') || nameLower.includes('colite') || nameLower.includes('fígado')) category = 'sistema-digestivo';
                        
                        frequencies.push({
                            id: frequencies.length + 1,
                            name: name,
                            frequency: freqValues,
                            category: category,
                            description: `Frequências para tratamento de ${name}`,
                            source: 'CAFL v2023_05_25',
                            waveType: 'square',
                            duration: '5-10 min'
                        });
                    }
                }
            }
            
            return frequencies;
        }
        
        function setupDbEventListeners() {
            // Busca rápida
            document.getElementById('dbQuickSearch').addEventListener('input', (e) => {
                dbFilters.search = e.target.value.toLowerCase();
                applyDbFilters();
            });

            // Filtros
            document.getElementById('dbCategoryFilter').addEventListener('change', (e) => {
                dbFilters.category = e.target.value;
                applyDbFilters();
            });

            document.getElementById('dbMinFreq').addEventListener('input', (e) => {
                dbFilters.minFreq = e.target.value;
            });

            document.getElementById('dbMaxFreq').addEventListener('input', (e) => {
                dbFilters.maxFreq = e.target.value;
            });

            document.getElementById('dbWaveTypeFilter').addEventListener('change', (e) => {
                dbFilters.waveType = e.target.value;
                applyDbFilters();
            });

            // Botões
            document.getElementById('dbApplyFilters').addEventListener('click', () => {
                applyDbFilters();
            });

            document.getElementById('dbClearFilters').addEventListener('click', () => {
                clearDbFilters();
            });
            
            document.getElementById('dbExportData').addEventListener('click', () => {
                exportDbData();
            });
        }
        
        function applyDbFilters() {
            filteredCaflData = caflData.filter(freq => {
                // Filtro de busca
                if (dbFilters.search && 
                    !freq.name.toLowerCase().includes(dbFilters.search) &&
                    !freq.description.toLowerCase().includes(dbFilters.search)) {
                    return false;
                }

                // Filtro de categoria
                if (dbFilters.category && freq.category !== dbFilters.category) {
                    return false;
                }

                // Filtro de faixa de frequência
                if (dbFilters.minFreq || dbFilters.maxFreq) {
                    const freqs = freq.frequency.split(',').map(f => parseFloat(f.trim()));
                    const min = dbFilters.minFreq ? parseFloat(dbFilters.minFreq) : 0;
                    const max = dbFilters.maxFreq ? parseFloat(dbFilters.maxFreq) : Infinity;

                    if (!freqs.some(f => f >= min && f <= max)) {
                        return false;
                    }
                }

                // Filtro de tipo de onda
                if (dbFilters.waveType && freq.waveType !== dbFilters.waveType) {
                    return false;
                }

                return true;
            });

            // Ordenar
            filteredCaflData.sort((a, b) => {
                switch (dbSortBy) {
                    case 'name':
                        return a.name.localeCompare(b.name);
                    case 'frequency':
                        const aFreq = parseFloat(a.frequency.split(',')[0]);
                        const bFreq = parseFloat(b.frequency.split(',')[0]);
                        return aFreq - bFreq;
                    case 'category':
                        return a.category.localeCompare(b.category);
                    default:
                        return 0;
                }
            });

            dbCurrentPage = 1;
            renderDbResults();
            updateDbStats();
        }
        
        function clearDbFilters() {
            dbFilters = {
                search: '',
                category: '',
                minFreq: '',
                maxFreq: '',
                waveType: ''
            };
            
            document.getElementById('dbQuickSearch').value = '';
            document.getElementById('dbCategoryFilter').value = '';
            document.getElementById('dbMinFreq').value = '';
            document.getElementById('dbMaxFreq').value = '';
            document.getElementById('dbWaveTypeFilter').value = '';
            
            applyDbFilters();
        }
        
        function renderDbResults() {
            const container = document.getElementById('dbResultsContainer');
            container.innerHTML = '';

            const start = (dbCurrentPage - 1) * dbItemsPerPage;
            const end = start + dbItemsPerPage;
            const pageItems = filteredCaflData.slice(start, end);

            if (pageItems.length === 0) {
                container.innerHTML = `
                    <div class="no-results">
                        <div class="no-results-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3>Nenhum resultado encontrado</h3>
                        <p>Tente ajustar seus filtros ou termos de busca.</p>
                    </div>
                `;
                return;
            }

            pageItems.forEach(freq => {
                const card = createDbFrequencyCard(freq);
                container.appendChild(card);
            });

            renderDbPagination();
        }
        
        function createDbFrequencyCard(freq) {
            const card = document.createElement('div');
            card.className = 'frequency-card bg-gray-800 rounded-lg p-4 fade-in';
            
            const firstFreq = freq.frequency.split(',')[0].trim();
            const freqCount = freq.frequency.split(',').length;
            
            card.innerHTML = `
                <div class="flex justify-between items-start mb-2">
                    <h3 class="text-lg font-semibold text-white">${freq.name}</h3>
                    <span class="category-badge bg-${getDbCategoryColor(freq.category)}-600 text-white">
                        ${getDbCategoryName(freq.category)}
                    </span>
                </div>
                
                <div class="mb-3">
                    <div class="text-sm text-gray-400 mb-1">Frequências (${freqCount})</div>
                    <div class="font-mono text-sm text-blue-400">${firstFreq}${freqCount > 1 ? '...' : ''} Hz</div>
                </div>
                
                <div class="flex justify-between items-center">
                    <div class="text-xs text-gray-500">
                        <i class="fas fa-clock mr-1"></i>${freq.duration}
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="useDbFrequency(${freq.id})" class="bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-sm transition">
                            <i class="fas fa-play mr-1"></i>Usar
                        </button>
                        <button onclick="showDbDetails(${freq.id})" class="bg-gray-600 hover:bg-gray-700 px-3 py-1 rounded text-sm transition">
                            <i class="fas fa-info-circle mr-1"></i>Detalhes
                        </button>
                    </div>
                </div>
            `;
            
            return card;
        }
        
        function getDbCategoryColor(category) {
            const colors = {
                'inflamacao': 'red',
                'dor': 'orange',
                'bacteria': 'yellow',
                'virus': 'purple',
                'fungo': 'green',
                'cancer': 'pink',
                'parasita': 'indigo',
                'respiratorio': 'blue',
                'pele': 'teal',
                'mental': 'purple',
                'sistema-nervoso': 'blue',
                'sistema-digestivo': 'green',
                'geral': 'gray'
            };
            return colors[category] || 'gray';
        }
        
        function getDbCategoryName(category) {
            const names = {
                'inflamacao': 'Inflamação',
                'dor': 'Dor',
                'bacteria': 'Bactéria',
                'virus': 'Vírus',
                'fungo': 'Fungo',
                'cancer': 'Câncer',
                'parasita': 'Parasita',
                'respiratorio': 'Respiratório',
                'pele': 'Pele',
                'mental': 'Mental/Emocional',
                'sistema-nervoso': 'Sistema Nervoso',
                'sistema-digestivo': 'Sistema Digestivo',
                'geral': 'Geral'
            };
            return names[category] || 'Geral';
        }
        
        function useDbFrequency(id) {
            const freq = caflData.find(f => f.id === id);
            if (freq) {
                // Mudar para a aba do gerador
                showSection('generator');
                
                // Definir a primeira frequência no gerador
                const firstFreq = freq.frequency.split(',')[0].trim();
                document.getElementById('frequency').value = firstFreq;
                
                // Atualizar informações da frequência
                updateFrequencyInfo(firstFreq);
                
                // Mostrar notificação
                showNotification(`Frequência ${firstFreq} Hz carregada no gerador`, 'success');
            }
        }
        
        function showDbDetails(id) {
            const freq = caflData.find(f => f.id === id);
            if (freq) {
                document.getElementById('dbModalTitle').textContent = freq.name;
                
                const freqList = freq.frequency.split(',').map(f => f.trim()).join(', ');
                
                document.getElementById('dbModalContent').innerHTML = `
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <h4 class="text-lg font-semibold mb-2">Informações Básicas</h4>
                            <div class="space-y-2">
                                <div><strong>Categoria:</strong> <span class="category-badge bg-${getDbCategoryColor(freq.category)}-600 text-white">${getDbCategoryName(freq.category)}</span></div>
                                <div><strong>Fonte:</strong> ${freq.source}</div>
                                <div><strong>Duração Recomendada:</strong> ${freq.duration}</div>
                                <div><strong>Tipo de Onda:</strong> ${getDbWaveTypeName(freq.waveType)}</div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="text-lg font-semibold mb-2">Frequências</h4>
                            <div class="bg-gray-700 rounded-lg p-3 max-h-40 overflow-y-auto">
                                <div class="font-mono text-sm">${freqList}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <h4 class="text-lg font-semibold mb-2">Descrição</h4>
                        <p class="text-gray-300">${freq.description}</p>
                    </div>
                    
                    <div class="mt-6 flex justify-end space-x-2">
                        <button onclick="closeDbModal()" class="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg transition">
                            Fechar
                        </button>
                        <button onclick="useDbFrequency(${freq.id}); closeDbModal();" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg transition">
                            <i class="fas fa-play mr-2"></i>Usar Frequência
                        </button>
                    </div>
                `;
                
                document.getElementById('dbDetailModal').classList.remove('hidden');
                document.getElementById('dbDetailModal').classList.add('flex');
            }
        }
        
        function closeDbModal() {
            document.getElementById('dbDetailModal').classList.add('hidden');
            document.getElementById('dbDetailModal').classList.remove('flex');
        }
        
        function getDbWaveTypeName(waveType) {
            const names = {
                'sine': 'Senoidal',
                'square': 'Quadrada',
                'sawtooth': 'Dente de Serra',
                'triangle': 'Triangular'
            };
            return names[waveType] || waveType;
        }
        
        function renderDbPagination() {
            const container = document.getElementById('dbPagination');
            container.innerHTML = '';
            
            const totalPages = Math.ceil(filteredCaflData.length / dbItemsPerPage);
            
            if (totalPages <= 1) {
                return;
            }
            
            // Botão Anterior
            const prevBtn = document.createElement('button');
            prevBtn.className = `pagination-btn ${dbCurrentPage === 1 ? 'disabled' : ''}`;
            prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i>';
            prevBtn.disabled = dbCurrentPage === 1;
            prevBtn.addEventListener('click', () => {
                if (dbCurrentPage > 1) {
                    dbCurrentPage--;
                    renderDbResults();
                }
            });
            container.appendChild(prevBtn);
            
            // Números de página
            const maxVisiblePages = 5;
            let startPage = Math.max(1, dbCurrentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
            
            if (endPage - startPage + 1 < maxVisiblePages) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            for (let i = startPage; i <= endPage; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.className = `pagination-btn ${i === dbCurrentPage ? 'bg-blue-600' : ''}`;
                pageBtn.textContent = i;
                pageBtn.addEventListener('click', () => {
                    dbCurrentPage = i;
                    renderDbResults();
                });
                container.appendChild(pageBtn);
            }
            
            // Botão Próximo
            const nextBtn = document.createElement('button');
            nextBtn.className = `pagination-btn ${dbCurrentPage === totalPages ? 'disabled' : ''}`;
            nextBtn.innerHTML = '<i class="fas fa-chevron-right"></i>';
            nextBtn.disabled = dbCurrentPage === totalPages;
            nextBtn.addEventListener('click', () => {
                if (dbCurrentPage < totalPages) {
                    dbCurrentPage++;
                    renderDbResults();
                }
            });
            container.appendChild(nextBtn);
        }
        
        function updateDbStats() {
            document.getElementById('dbResultCount').textContent = filteredCaflData.length;
        }
        
        function exportDbData() {
            if (filteredCaflData.length === 0) {
                showNotification('Nenhum dado para exportar', 'warning');
                return;
            }
            
            // Criar conteúdo CSV
            let csvContent = "Nome,Categoria,Frequências,Descrição,Fonte,Duração,Tipo de Onda\n";
            
            filteredCaflData.forEach(item => {
                csvContent += `"${item.name}","${getDbCategoryName(item.category)}","${item.frequency}","${item.description}","${item.source}","${item.duration}","${getDbWaveTypeName(item.waveType)}"\n`;
            });
            
            // Criar blob e download
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', 'cafl_frequencies.csv');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification('Dados exportados com sucesso', 'success');
        }
        
        // ======== FUNÇÕES DE EVENT LISTENERS ========
        function setupEventListeners() {
            // Botões de áudio
            document.getElementById('playBtn').addEventListener('click', playFrequency);
            document.getElementById('stopBtn').addEventListener('click', stopFrequency);
            
            // Controle de volume
            document.getElementById('volume').addEventListener('input', (e) => {
                document.getElementById('volumeValue').textContent = e.target.value;
                if (gainNode && isPlaying) {
                    gainNode.gain.setValueAtTime(e.target.value / 100, audioContext.currentTime);
                }
            });
            
            // Seleção de tipo de onda
            document.querySelectorAll('.wave-type-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    // Remover classe ativa de todos os botões
                    document.querySelectorAll('.wave-type-btn').forEach(b => {
                        b.classList.remove('bg-blue-600');
                        b.classList.add('bg-gray-700');
                    });
                    
                    // Adicionar classe ativa ao botão clicado
                    e.target.classList.remove('bg-gray-700');
                    e.target.classList.add('bg-blue-600');
                    
                    // Atualizar tipo de onda
                    currentWaveType = e.target.dataset.wave;
                    
                    // Atualizar visualização
                    const canvas = document.getElementById('waveCanvas');
                    const canvasCtx = canvas.getContext('2d');
                    drawWaveform(canvasCtx, canvas.width, canvas.height, parseFloat(document.getElementById('frequency').value) || 40);
                    
                    // Atualizar recomendação
                    updateFrequencyInfo(parseFloat(document.getElementById('frequency').value) || 40);
                });
            });
            
            // Timer
            document.getElementById('timerBtn').addEventListener('click', () => {
                // Criar modal para configurar timer
                const timerModal = document.createElement('div');
                timerModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                timerModal.innerHTML = `
                    <div class="bg-gray-800 rounded-xl p-6 max-w-md w-full">
                        <h3 class="text-xl font-semibold mb-4">Configurar Timer</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium mb-1">Horas</label>
                                <input type="number" id="timerHours" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2" min="0" max="23" value="0">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-1">Minutos</label>
                                <input type="number" id="timerMinutes" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2" min="0" max="59" value="5">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-1">Segundos</label>
                                <input type="number" id="timerSeconds" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2" min="0" max="59" value="0">
                            </div>
                        </div>
                        <div class="flex justify-end space-x-2 mt-6">
                            <button onclick="this.closest('.fixed').remove()" class="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg">Cancelar</button>
                            <button onclick="setupTimer(); this.closest('.fixed').remove();" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg">Configurar</button>
                        </div>
                    </div>
                `;
                document.body.appendChild(timerModal);
            });
            
            // Favoritos
            document.getElementById('favoriteBtn').addEventListener('click', toggleFavorite);
            
            // Input de frequência
            document.getElementById('frequency').addEventListener('input', (e) => {
                const frequency = parseFloat(e.target.value);
                if (!isNaN(frequency)) {
                    updateFrequencyInfo(frequency);
                    
                    // Atualizar visualização
                    const canvas = document.getElementById('waveCanvas');
                    const canvasCtx = canvas.getContext('2d');
                    drawWaveform(canvasCtx, canvas.width, canvas.height, frequency);
                }
            });
            
            // Modal de headphones
            document.getElementById('closeHeadphoneModal').addEventListener('click', () => {
                document.getElementById('headphoneModal').style.display = 'none';
                
                if (document.getElementById('dontShowAgain').checked) {
                    localStorage.setItem('dontShowHeadphonesModal', 'true');
                }
            });
            
            // Filtros do banco de dados principal
            document.getElementById('minFreqRange').addEventListener('input', (e) => {
                document.getElementById('minFreqValue').textContent = e.target.value;
            });
            
            document.getElementById('maxFreqRange').addEventListener('input', (e) => {
                document.getElementById('maxFreqValue').textContent = e.target.value;
            });
            
            document.getElementById('applyFilters').addEventListener('click', applyFilters);
            document.getElementById('clearFilters').addEventListener('click', clearFilters);
        }
        
        // ======== FUNÇÕES DE FILTROS DO BANCO DE DADOS PRINCIPAL ========
        function applyFilters() {
            // Esta função seria implementada para o banco de dados principal
            // Por enquanto, apenas mostra uma notificação
            showNotification('Filtros aplicados', 'success');
        }
        
        function clearFilters() {
            document.getElementById('minFreqRange').value = 20;
            document.getElementById('maxFreqRange').value = 20000;
            document.getElementById('minFreqValue').textContent = 20;
            document.getElementById('maxFreqValue').textContent = 20000;
            document.getElementById('categoryFilter').value = '';
            document.getElementById('evidenceFilter').value = '';
            document.getElementById('sortBy').value = 'name';
            
            showNotification('Filtros limpos', 'info');
        }
        
        // ======== FUNÇÕES DE ARMAZENAMENTO LOCAL ========
        function saveLocalData() {
            const data = {
                history,
                favorites,
                protocols
            };
            localStorage.setItem('harmonizadorData', JSON.stringify(data));
        }
        
        function loadLocalData() {
            const savedData = localStorage.getItem('harmonizadorData');
            if (savedData) {
                const data = JSON.parse(savedData);
                history = data.history || [];
                favorites = data.favorites || [];
                protocols = data.protocols || [];
                updateHistoryDisplay();
            }
        }
        
        // ======== FUNÇÕES DE NOTIFICAÇÕES ========
        function showNotification(message, type = 'info') {
            // Remover notificações existentes
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(n => n.remove());
            
            // Criar nova notificação
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            // Remover após 3 segundos
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
        
        // ======== FUNÇÃO DE SCROLL PARA TOPO ========
        function setupScrollToTop() {
            const topBtn = document.getElementById('topBtn');
            
            window.addEventListener('scroll', () => {
                if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                    topBtn.classList.add('show');
                } else {
                    topBtn.classList.remove('show');
                }
            });
            
            topBtn.addEventListener('click', () => {
                document.body.scrollTop = 0;
                document.documentElement.scrollTop = 0;
            });
        }
        
        // ======== FUNÇÕES DE PROTOCOLOS ========
        // Estas funções seriam implementadas para gerenciar protocolos de frequências
        // Por enquanto, são apenas stubs
    </script>
</body>
</html>
