 // Atualizar os indicadores
                document.querySelectorAll('#stepIndicators button').forEach((btn, index) => {
                    if (index === currentStep) {
                        btn.className = 'px-3 py-1 rounded-full text-sm bg-purple-600 text-white';
                    } else {
                        btn.className = 'px-3 py-1 rounded-full text-sm bg-gray-700 text-gray-300';
                    }
                });

                // Atualizar o nome do passo
                document.getElementById('currentStepName').textContent = protocolSteps[currentStep].name;

                // Atualizar o progresso
                updateProtocolProgress();

                // Se o passo tiver frequência, configurá-la
                if (protocolSteps[currentStep].frequency > 0) {
                    document.getElementById('frequency').value = protocolSteps[currentStep].frequency;
                    updateCurrentFrequency(protocolSteps[currentStep].frequency);
                    // Configurar o tipo de onda
                    waveType = protocolSteps[currentStep].waveType;
                    // Atualizar os botões de tipo de onda
                    document.querySelectorAll('.wave-type-btn').forEach(btn => {
                        btn.classList.remove('bg-blue-600');
                        btn.classList.add('bg-gray-700');
                        if (btn.dataset.wave === waveType) {
                            btn.classList.remove('bg-gray-700');
                            btn.classList.add('bg-blue-600');
                        }
                    });
                    // Atualizar a recomendação de onda
                    updateWaveRecommendation();
                }
            }

            // Função para atualizar o progresso do protocolo
            function updateProtocolProgress() {
                const progress = ((currentStep + 1) / protocolSteps.length) * 100;
                document.getElementById('protocolProgressBar').style.width = `${progress}%`;
                document.getElementById('protocolProgressText').textContent = `${currentStep + 1}/${protocolSteps.length}`;
            }

            // Configurar os botões de navegação
            document.getElementById('prevStepBtn').onclick = function() {
                if (currentStep > 0) {
                    goToStep(currentStep - 1);
                }
            };

            document.getElementById('nextStepBtn').onclick = function() {
                if (currentStep < protocolSteps.length - 1) {
                    goToStep(currentStep + 1);
                }
            };

            // Configurar o botão de sair
            document.getElementById('exitProtocolBtn').onclick = function() {
                protocolControls.classList.add('hidden');
                stopTone();
            };

            // Iniciar no primeiro passo
            goToStep(0);
        };
    });
</script>
      </body>
</html>
